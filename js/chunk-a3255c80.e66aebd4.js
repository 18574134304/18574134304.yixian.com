(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a3255c80"],{"10c6":function(t,i,e){},"129f":function(t,i){t.exports=Object.is||function(t,i){return t===i?0!==t||1/t===1/i:t!=t&&i!=i}},1665:function(t,i,e){},"279b":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"check-address"}},[e("nav-bar",{attrs:{title:"选择收货地址"}}),e("div",{staticClass:"search"},[e("div",{staticClass:"box"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.popup_flag,expression:"popup_flag"}],staticClass:"popup"},[e("div",{staticClass:"box"},[t._v("例如：清华大学、xx小区")])]),e("router-link",{staticStyle:{display:"flex"},attrs:{to:"/cityPicker"}},[t.city?e("svg",{staticClass:"icon c-icon1",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-dingwei1"}})]):t._e(),e("div",{staticClass:"a-msg van-ellipsis"},[e("span",{staticClass:"area-msg",class:t.city?"":"_3aHDy"},[t._v(t._s(t.city?t.city:"选择城市"))])])]),e("div",{staticClass:"search-box"},[e("i",{staticClass:"search-icon"}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{autocomplete:"off",autocorrect:"off",type:"text",placeholder:"请输入地址"},domProps:{value:t.value},on:{input:[function(i){i.target.composing||(t.value=i.target.value)},t.handelInput],focus:t.handelFocus}}),e("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],staticClass:"clear-icon",attrs:{name:"cross"},on:{click:function(){t.value="",t.popup_flag=!0,t.address_list=[]}}})],1),t.cancel_flag?e("div",{staticClass:"cancel",on:{click:t.cancel}},[t._v("取消")]):t._e()],1)]),e("div",{staticClass:"address-content"},[t.initFlag?e("div",{directives:[{name:"show",rawName:"v-show",value:!t.query_flag,expression:"!query_flag"}],staticClass:"current-position",on:{click:t.checkAdd}},[t.po_flag?[t._v(" 当前定位: "),e("span",{staticClass:"position-msg van-ellipsis"},[t._v(t._s(t.addressName))])]:e("span",{staticClass:"n-msg van-ellipsis"},[t._v(t._s(t.addressName))]),e("div",{staticClass:"re-locate",on:{click:function(i){return i.stopPropagation(),t.reLocate(i)}}},[e("svg",{staticClass:"icon add-icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-dingwei"}})]),t._v(" 重新定位 ")])],2):e("div",{directives:[{name:"show",rawName:"v-show",value:!t.query_flag,expression:"!query_flag"}],staticClass:"n_in30fd3"},[e("p",{staticClass:"msg"},[t._v("请选择城市，并输入送货地址")]),e("p",{staticClass:"re-locate"},[t._v(" 或者 "),e("span",{on:{click:function(i){return i.stopPropagation(),t.reLocate(i)}}},[e("svg",{staticClass:"icon add-icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-dingwei"}})]),t._v(" 重新定位 ")])])]),t.po_flag?e("div",{staticClass:"nearby-address"},[e("p",{staticClass:"block-title"},[e("svg",{staticClass:"icon c-icon1",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-dingwei1"}})]),t._v(" 附近地址 ")]),e("div",{staticClass:"box"},t._l(t.pois,(function(i){return e("div",{key:i.id,staticClass:"item van-ellipsis",on:{click:function(e){return t.checkAddress(i,1)}}},[t._v(" "+t._s(i.name)+" ")])})),0)]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:t.query_flag,expression:"query_flag"}],staticClass:"search-overlay"},[e("div",{staticClass:"address-box"},t._l(t.address_list,(function(i){return e("div",{key:i.id,staticClass:"item",class:{"item-active":t.activeKey==i.id},on:{click:function(e){return t.checkAddress(i)}}},[e("div",{staticClass:"add-info"},[e("div",{staticClass:"add-msg van-ellipsis"},[t._v(t._s(i.name))])]),e("div",{staticClass:"add-detail van-ellipsis"},[t._v(" "+t._s(i.cityname+i.address)+" ")])])})),0),e("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],attrs:{loadingType:2}})],1)]),t.reLocateFlag?e("loading",{attrs:{loadingType:3}}):t._e()],1)},a=[],n=(e("c975"),e("fb6a"),e("b0c0"),e("d3b7"),e("ac1f"),e("3ca3"),e("5319"),e("841c"),e("ddb0"),e("2b3d"),e("5530")),r=(e("96cf"),e("1da1")),o=e("d968"),c=e("bf93"),l=e("2f62"),d={components:{navBar:o["a"],Loading:c["a"]},data:function(){return{addressFlag:!1,value:"",popup_flag:!1,cancel_flag:!1,address_list:[],query_flag:!1,activeKey:"",timer:null,isLoading:!1,initFlag:!1,city:"",addressName:"",reLocateFlag:!1,po_flag:!1,placeSearch:null,pois:[]}},created:function(){"{}"!==JSON.stringify(this.$route.query)&&(this.addressFlag=!0),this.initAddress&&(this.initFlag=!0,this.pois=this.initAddress.pois,this.initAddress.initPosition&&this.initAddress.pickerPoi?(this.po_flag=!0,this.addressName=this.initAddress.addressName,this.city=this.initAddress.pickerPoi.city):this.initAddress.pickerPoi?(this.city=this.initAddress.pickerPoi.city,this.positionFlag?(console.log(1),this.po_flag=!1,this.addressName=this.initAddress.addressName):this.initAddress.address&&(this.po_flag=!1,this.addressName="没有获取到当前位置，请重新定位")):(this.po_flag=!0,this.city=this.initAddress.initPosition.city,this.addressName=this.initAddress.addressName)),"/checkAddress"===this.$route.path&&this.picker_city&&(console.log("ahhah"),this.city=this.picker_city,this.$store.commit("set_picker_city","")),this.placeSearch=new AMap.PlaceSearch({pageSize:10,city:this.city,extensions:"all"}),this.placeSearch.setCityLimit(!0)},methods:{queryAddress:function(){var t=this;this.value&&this.placeSearch.search(this.value,(function(i,e){console.log(i,e),t.value?("complete"===i&&e.poiList?t.address_list=e.poiList.pois:t.address_list=[],t.isLoading=!1):t.address_list=[]}))},goIndex:function(){this.$router.go(-1)},getCurrentCityPostion:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var e,s,a,n,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.positionFlag){i.next=11;break}return e=new URLSearchParams,e.append("shopAddressCity",t.$store.state.city),i.next=5,t.$http.post("/user/postSelectShopCoordinateByCity",e);case 5:s=i.sent,a=s.data,console.log(a),"000000"===a.messageStatus&&(t.reLocateFlag=!1,t.addressName=a.addressName,n=JSON.parse(localStorage.getItem("param")),n||(n={}),n.initPosition||(n.initPosition={}),n.initPosition.lng=a.phone_x,n.initPosition.lat=a.phone_y,n.initPosition.province=a.shopAddressProvince,n.initPosition.city=a.shopAddressCity,n.initPosition.district=a.shopAddressArea,n.addressName=a.addressName,localStorage.setItem("param",JSON.stringify(n)),t.$store.commit("setAddress",n),r=a.phone_x+","+a.phone_y,t.get_NearbyAddress(r),n.initPosition||t.goIndex()),i.next=13;break;case 11:t.reLocateFlag=!1,t.getPostion();case 13:case"end":return i.stop()}}),i)})))()},getPostion:function(){var t=this,i=new AMap.Geolocation({enableHighAccuracy:!0});i.getCurrentPosition((function(i,e){if("complete"==i){var s=JSON.parse(localStorage.getItem("param"));s&&s.pickerPoi&&delete s.pickerPoi,s.initPosition.lng=e.position.lng,s.initPosition.lat=e.position.lat,s.initPosition.province=e.addressComponent.province,s.initPosition.city=e.addressComponent.city,s.initPosition.district=e.addressComponent.district;var a=e.addressComponent.township,n=e.formattedAddress,r=n.indexOf(a);r+=a.length;var o=n.slice(r);s.addressName=o,t.addressName=o,localStorage.setItem("param",JSON.stringify(s)),t.$store.commit("setAddress",s)}else alert("定位出问题了")}))},get_NearbyAddress:function(t){var i=this,e=new AMap.Geocoder({city:this.city,radius:500,extensions:"all"});e.getAddress(t,(function(t,e){if("complete"===t&&e.regeocode){var s=JSON.parse(localStorage.getItem("param")),a=e.regeocode.pois.slice(1,6);console.log(a),s.pois=a,i.pois=a,localStorage.setItem("param",JSON.stringify(s)),i.$store.commit("setAddress",s)}}))},checkAdd:function(){var t=JSON.parse(localStorage.param);t.initPosition.city,t.pickerPoi&&(t.address="",delete t.pickerPoi),localStorage.setItem("param",JSON.stringify(t)),this.$store.commit("setAddress",t),this.goIndex()},reLocate:function(){var t=this;this.city=this.$store.state.city,this.initFlag=!0,this.po_flag=!0,this.addressName="定位中...",this.reLocateFlag=!0,setTimeout((function(){t.getCurrentCityPostion()}),1e3)},handelInput:function(){this.value?this.value=this.value.replace(/\s/g,""):this.popup_flag=!0},handelFocus:function(){this.cancel_flag=!0,this.query_flag=!0,this.value?this.popup_flag=!1:this.popup_flag=!0},cancel:function(){this.cancel_flag=!1,this.value="",this.popup_flag=!1,this.address_list=[],this.query_flag=!1},checkAddress:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.activeKey=t.id;var e={},s=JSON.parse(localStorage.getItem("param"));this.addressFlag?(s.editAddress||(s.editAddress={}),s.editAddress.lng=t.location.lng,s.editAddress.lat=t.location.lat,s.editAddress.poi=t.name):(i?(e.lat=t.location.lat,e.lng=t.location.lng,e.city=this.$store.state.city):(e.province=t.pname,e.city=t.cityname,e.area=t.adname,e.lat=t.location.lat,e.lng=t.location.lng),s?s.pickerPoi=e:s={pickerPoi:e},s.address=t.name),this.$store.commit("setAddress",s),localStorage.setItem("param",JSON.stringify(s)),this.goIndex()}},computed:Object(n["a"])({},Object(l["d"])(["initAddress","positionFlag","picker_city"])),watch:{value:function(){var t=this;return this.city?(console.log(1),this.value?(this.isLoading||(this.isLoading=!0),this.popup_flag&&(this.popup_flag=!1),void(this.timer||(this.timer=setTimeout((function(){t.queryAddress(),t.timer=null}),500)))):(this.address_list=[],this.data=[],void(this.isLoading=!1))):this.$toast({message:"请先选择城市",className:"checkAddress-toast"})}}},u=d,p=(e("545f"),e("2877")),h=Object(p["a"])(u,s,a,!1,null,"064c9d33",null);i["default"]=h.exports},3155:function(t,i,e){"use strict";e("ba88")},5319:function(t,i,e){"use strict";var s=e("d784"),a=e("825a"),n=e("7b0b"),r=e("50c4"),o=e("a691"),c=e("1d80"),l=e("8aa5"),d=e("14c3"),u=Math.max,p=Math.min,h=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};s("replace",2,(function(t,i,e,s){var m=s.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,_=s.REPLACE_KEEPS_$0,y=m?"$":"$0";return[function(e,s){var a=c(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a,s):i.call(String(a),e,s)},function(t,s){if(!m&&_||"string"===typeof s&&-1===s.indexOf(y)){var n=e(i,t,this,s);if(n.done)return n.value}var c=a(t),h=String(this),f="function"===typeof s;f||(s=String(s));var v=c.global;if(v){var A=c.unicode;c.lastIndex=0}var x=[];while(1){var N=d(c,h);if(null===N)break;if(x.push(N),!v)break;var k=String(N[0]);""===k&&(c.lastIndex=l(h,r(c.lastIndex),A))}for(var b="",S=0,w=0;w<x.length;w++){N=x[w];for(var P=String(N[0]),I=u(p(o(N.index),h.length),0),$=[],E=1;E<N.length;E++)$.push(g(N[E]));var L=N.groups;if(f){var F=[P].concat($,I,h);void 0!==L&&F.push(L);var O=String(s.apply(void 0,F))}else O=C(P,h,I,$,L,s);I>=S&&(b+=h.slice(S,I)+O,S=I+P.length)}return b+h.slice(S)}];function C(t,e,s,a,r,o){var c=s+t.length,l=a.length,d=v;return void 0!==r&&(r=n(r),d=f),i.call(o,d,(function(i,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,s);case"'":return e.slice(c);case"<":o=r[n.slice(1,-1)];break;default:var d=+n;if(0===d)return i;if(d>l){var u=h(d/10);return 0===u?i:u<=l?void 0===a[u-1]?n.charAt(1):a[u-1]+n.charAt(1):i}o=a[d-1]}return void 0===o?"":o}))}}))},"545f":function(t,i,e){"use strict";e("1665")},5899:function(t,i){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,i,e){var s=e("1d80"),a=e("5899"),n="["+a+"]",r=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),c=function(t){return function(i){var e=String(s(i));return 1&t&&(e=e.replace(r,"")),2&t&&(e=e.replace(o,"")),e}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,i,e){var s=e("861d"),a=e("d2bb");t.exports=function(t,i,e){var n,r;return a&&"function"==typeof(n=i.constructor)&&n!==e&&s(r=n.prototype)&&r!==e.prototype&&a(t,r),t}},"841c":function(t,i,e){"use strict";var s=e("d784"),a=e("825a"),n=e("1d80"),r=e("129f"),o=e("14c3");s("search",1,(function(t,i,e){return[function(i){var e=n(this),s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,e):new RegExp(i)[t](String(e))},function(t){var s=e(i,t,this);if(s.done)return s.value;var n=a(t),c=String(this),l=n.lastIndex;r(l,0)||(n.lastIndex=0);var d=o(n,c);return r(n.lastIndex,l)||(n.lastIndex=l),null===d?-1:d.index}]}))},"857a":function(t,i,e){var s=e("1d80"),a=/"/g;t.exports=function(t,i,e,n){var r=String(s(t)),o="<"+i;return""!==e&&(o+=" "+e+'="'+String(n).replace(a,"&quot;")+'"'),o+">"+r+"</"+i+">"}},"88fb":function(t,i,e){"use strict";e("10c6")},9911:function(t,i,e){"use strict";var s=e("23e7"),a=e("857a"),n=e("af03");s({target:"String",proto:!0,forced:n("link")},{link:function(t){return a(this,"a","href",t)}})},a9e3:function(t,i,e){"use strict";var s=e("83ab"),a=e("da84"),n=e("94ca"),r=e("6eeb"),o=e("5135"),c=e("c6b6"),l=e("7156"),d=e("c04e"),u=e("d039"),p=e("7c73"),h=e("241c").f,f=e("06cf").f,v=e("9bf2").f,g=e("58a8").trim,m="Number",_=a[m],y=_.prototype,C=c(p(y))==m,A=function(t){var i,e,s,a,n,r,o,c,l=d(t,!1);if("string"==typeof l&&l.length>2)if(l=g(l),i=l.charCodeAt(0),43===i||45===i){if(e=l.charCodeAt(2),88===e||120===e)return NaN}else if(48===i){switch(l.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+l}for(n=l.slice(2),r=n.length,o=0;o<r;o++)if(c=n.charCodeAt(o),c<48||c>a)return NaN;return parseInt(n,s)}return+l};if(n(m,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var x,N=function(t){var i=arguments.length<1?0:t,e=this;return e instanceof N&&(C?u((function(){y.valueOf.call(e)})):c(e)!=m)?l(new _(A(i)),e,N):A(i)},k=s?h(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),b=0;k.length>b;b++)o(_,x=k[b])&&!o(N,x)&&v(N,x,f(_,x));N.prototype=y,y.constructor=N,r(a,m,N)}},af03:function(t,i,e){var s=e("d039");t.exports=function(t){return s((function(){var i=""[t]('"');return i!==i.toLowerCase()||i.split('"').length>3}))}},ba88:function(t,i,e){},bf93:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{class:"loading"+t.loadingType},[1===t.loadingType?e("div",{staticClass:"spinner"},[e("div",{staticClass:"rect1"}),e("div",{staticClass:"rect2"}),e("div",{staticClass:"rect3"}),e("div",{staticClass:"rect4"}),e("div",{staticClass:"rect5"})]):2===t.loadingType?e("van-loading",{attrs:{color:"#fff",size:"40"}}):3===t.loadingType?e("div",{staticClass:"box"},[e("i",{staticClass:"icon"})]):t._e()],1)},a=[],n=(e("a9e3"),{props:{loadingType:{type:Number,default:1}},name:"Loading"}),r=n,o=(e("3155"),e("2877")),c=Object(o["a"])(r,s,a,!1,null,"282e5753",null);i["a"]=c.exports},d968:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"nav"},[e("div",{staticClass:"b"},[e("van-icon",{staticClass:"nav-arrow-left",attrs:{name:"arrow-left"},on:{click:t.navigator}}),e("div",{staticClass:"nav-title"},[t._v(t._s(t.title))])],1)])},a=[],n=(e("ac1f"),e("5319"),e("9911"),{props:["title","link","location_search_id"],methods:{navigator:function(){"/"===this.link?(this.$store.commit("checkTab",2),this.$router.go(-1)):"/index"===this.link?(console.log("ok"),this.$router.replace({path:"/index",query:{shop_id:this.location_search_id}})):this.$router.go(-1)}}}),r=n,o=(e("88fb"),e("2877")),c=Object(o["a"])(r,s,a,!1,null,"3579abc0",null);i["a"]=c.exports}}]);