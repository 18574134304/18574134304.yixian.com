(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25632994"],{1603:function(t,e,s){},"1beb":function(t,e,s){},"1e4b":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"index"}},[s("div",{ref:"header",style:t.takeway?t.header_styleObject:"",attrs:{id:"header"}},[t.takeway?s("div",{ref:"take",staticClass:"takeway-header"},[s("div",{staticClass:"u-addess"},[s("div",{staticClass:"address"},["获取定位"!==t.address?s("div",[s("svg",{staticClass:"icon add-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-dingwei1"}})]),s("span",{staticClass:"getAddress"},[t._v(t._s(t.address))])]):s("div",{on:{click:t.getLocation}},[s("svg",{staticClass:"icon add-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-dingwei"}})]),s("span",[t._v(t._s(t.address))])])]),s("div",{staticClass:"user",on:{click:function(e){return t.$alert({title:"2",message:"用户"})}}},[s("van-icon",{staticClass:"icon-user",attrs:{name:"manager"}})],1)]),s("van-notice-bar",{attrs:{scrollable:!1,text:"特惠：满15减5、满20减10、满30减20"}}),s("van-swipe",{attrs:{"indicator-color":"white",autoplay:3e3}},[t._l(t.bannerList,(function(e,r){return[e.advertisementPicPath?s("van-swipe-item",{key:r},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.advertisementPicPath,expression:"item.advertisementPicPath"}]})]):t._e()]}))],2)],1):s("div",{ref:"t_header",staticClass:"t-header"},[s("div",{staticClass:"tab-item",class:{"tab-item-active":0===t.tabIndex},on:{click:function(e){return t.check(0)}}},[t._v(" 点餐 ")]),s("div",{staticClass:"tab-item",class:{"tab-item-active":t.tabIndex},on:{click:function(e){return t.check(1)}}},[t._v(" 订单 ")])])]),s("div",{ref:"content",staticClass:"s_content",class:{o_content:t.tabIndex,take_content:t.takeway},style:t.takeway?t.content_styleObject:""},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.tabIndex,expression:"!tabIndex"}],staticClass:"index clearfix"},[s("div",{ref:"menuScroll",staticClass:"d_cate fl"},[s("ul",{staticClass:"menu"},t._l(t.Food,(function(e,r){return s("li",{key:e.key,staticClass:"menu-item",class:{"menu-item-acitve":r===t.currentIndex},on:{click:function(e){return t.handelClick(r)}}},[s("a",{attrs:{href:"javascript:void(0);"}},[s("p",[t._v(t._s(e.food_type_name))]),s("div",t._l(e.iconArr,(function(e,r){return s("span",{key:r,domProps:{innerHTML:t._s(e)}})})),0)]),s("van-badge",{directives:[{name:"show",rawName:"v-show",value:t.reNum(e.listArray),expression:"reNum(item.listArray)"}],staticClass:"v-badge",attrs:{content:t.reNum(e.listArray),max:"99"}})],1)})),0)]),s("div",{staticClass:"d_food_list fr"},[s("div",{staticClass:"food-card-header clearfix"},[s("div",{staticClass:"menu-title fl clearfix"},[s("div",{staticClass:"title fl van-ellipsis"},[s("span",[t._v(t._s(t.menuTitle?t.menuTitle.food_type_name:""))])])]),s("div",{staticClass:"search fr",on:{click:function(e){return t.$router.push("/query")}}},[s("svg",{staticClass:"icon search-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-sousuo"}})]),s("span",[t._v("搜索")])])]),s("div",{ref:"foodScroll",attrs:{id:"food"}},[s("div",{staticClass:"wrapper"},t._l(t.Food,(function(e,r){return s("div",{key:r,staticClass:"foodBox",style:r===t.Food.length-1?t.food_styleObject:""},[s("div",{staticClass:"food-item-title"},[0!==r?[s("span",{staticClass:"food-title"},[t._v(t._s(e.food_type_name))]),t._l(e.iconArr,(function(e,r){return s("span",{key:r,domProps:{innerHTML:t._s(e)}})}))]:t._e()],2),s("food-item",{attrs:{food:e.listArray},on:{handelFocus:t.showKey}})],1)})),0)])])]),t.takeway?t._e():[s("order",{directives:[{name:"show",rawName:"v-show",value:t.tabIndex,expression:"tabIndex"}]})]],2),s("key-board",{attrs:{key_flag:t.show,item:t.item},on:{onHide:t.closeKey}}),s("shop-cart",{directives:[{name:"show",rawName:"v-show",value:!t.tabIndex,expression:"!tabIndex"}]}),t.isLoading?s("loading",{attrs:{loadingType:1}}):t._e()],1)},i=[],n=(s("4de4"),s("4160"),s("c975"),s("a9e3"),s("d3b7"),s("3ca3"),s("159b"),s("ddb0"),s("2b3d"),s("96cf"),s("1da1")),a=s("5530"),o=s("bf93"),c=s("6d9e"),l=s("653e"),d=s("92fe"),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"orderScroll",staticClass:"order"},[t.flag?s("div",{staticClass:"empty"},[s("h1",[t._v("没有数据")])]):s("div",{staticClass:"wrapper"},t._l(t.order_list,(function(e){return s("div",{key:e.orderId,staticClass:"order-item",on:{click:function(s){return t.orderDetail(e.orderId)}}},[s("div",{staticClass:"order-item-header clearfix"},[s("div",{staticClass:"fl shop-order"},[s("span",{staticClass:"os-name van-ellipsis"},[t._v(t._s(e.shopName+"—"+e.tableNumber))]),s("span",{staticClass:"os-time van-ellipsis"},[t._v(t._s(t._f("dateFormat")(e.orderTime)))])]),t._m(0,!0)]),s("div",{staticClass:"o-centent"},[s("ul",t._l(e.orderMessage,(function(e,r){return s("li",{key:r,staticClass:"food-item clearfix"},[s("div",{staticClass:"food-info fl"},[s("p",{staticClass:"food-name"},[t._v(t._s(e.name))]),s("span",{staticClass:"food-num"},[t._v(t._s(e.num))])]),s("p",{staticClass:"food-price fr"},[t._v(t._s("￥"+e.foodPice+"元"))])])})),0)]),s("div",{staticClass:"order-item-fotter clearfix"},[s("p",{staticClass:"order-item-msg fr"},[t._v(" 共"+t._s(e.orderMessage.length)+"件商品，实付:￥"+t._s(e.orderPice)+"元 ")])])])})),0)])},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"fr order-status"},[s("span",[t._v("订单状态未知")])])}],h={data:function(){return{flag:!1,query_info:{tableNumber:"测试2号桌",shopId:"00b6e25446304622afc76b9cb1493063",pageStr:"0"},order_list:[]}},methods:{queryOrder:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,r,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in s=new URLSearchParams,t.query_info)s.append(r,t.query_info[r]);return e.next=4,t.$http.post("/user/postSelectAllOrderByOrderUserId",s);case 4:i=e.sent,n=i.data,"000000"===n.messageStatus&&(t.order_list=n.listArray.reverse(),t.$nextTick((function(){t.scroll?t.scroll.refresh():t.scroll=new t.$BScroll(t.$refs.orderScroll,{click:!0})})));case 7:case"end":return e.stop()}}),e)})))()},orderDetail:function(t){this.$router.push({path:"/detail",query:{o_id:t}})}},created:function(){this.queryOrder()},computed:{tabIndex:function(){return this.$store.state.tabIndex}},watch:{tabIndex:function(t){console.log("哈哈哈哈哈哈"),t&&this.queryOrder()}}},v=h,p=(s("e29a"),s("2877")),m=Object(p["a"])(v,u,f,!1,null,"10d454c0",null),b=m.exports,y=s("2f62");var g={components:{foodItem:d["a"],shopCart:l["a"],order:b,loading:o["a"],keyBoard:c["a"]},data:function(){return{aaa:100,header_styleObject:{transform:"",transition:"0.2s linear",opacity:""},content_styleObject:{transform:"",transition:"0.2s linear"},food_styleObject:{"margin-bottom":"0","min-height":""},ffflag:!0,isLoading:!0,show:!1,item:{},vt_ipt:"",scrollY:0,listHeight:[],activeKey:0,Food:[],bannerList:[],ScrollClient:0,address:"获取定位"}},methods:Object(a["a"])(Object(a["a"])({getLocation:function(){var t=this,e=new BMap.Geolocation;e.getCurrentPosition((function(s){if(e.getStatus()==BMAP_STATUS_SUCCESS){new BMap.Marker(s.point);t.getadd(s.point)}else alert("failed")}))},getadd:function(t){var e=this,s=new BMap.Geocoder;s.getLocation(t,(function(t){var s=t.addressComponents,r=s.province+s.city+s.district+s.street+s.streetNumber;e.$alert({title:"位置",message:r})}))},showPosition:function(t){console.log(t);var e=t.coords.latitude,s=t.coords.longitude;console.log("纬度:"+e+",经度:"+s)},showError:function(t){alert("no")}},Object(y["c"])(["checkTab","setMethod"])),{},{check:function(t){var e=this;t!==this.tabIndex&&(this.checkTab(t),t||this.$nextTick((function(){e.calcFoodHeight(),e.scroll.refresh(),e.menuScroll.refresh()})))},getCart:function(){var t=JSON.parse(localStorage.cart),e=[];t.filter((function(t){return e.push(t.foodId)})),this.$store.state.foodList=t,this.Food.forEach((function(s){s.listArray&&s.listArray.forEach((function(s){-1!=e.indexOf(s.foodId)&&(s.foodNumber=t[e.indexOf(s.foodId)].foodNumber)}))}))},handelClick:function(t){var e=this.$refs.foodScroll.querySelectorAll(".foodBox");this.scroll.scrollToElement(e[t],200)},showMsg:function(){this.$alert({title:"公告",message:"公告:有问题可咨询客服1999999999999 (微信同号) !"})},reNum:function(t){if(t){var e=0;return t.filter((function(t){t.foodNumber&&(e+=Number(t.foodNumber))})),e}},closeKey:function(t){this.show=t},showKey:function(t){console.log(t),this.item=t,this.show=!0},calcFoodHeight:function(){var t=this;this.$nextTick((function(){var e=t.$refs.foodScroll.querySelectorAll(".foodBox"),s=0;t.listHeight.push(s);for(var r=0;r<e.length;r++)s+=e[r].clientHeight,t.listHeight.push(s)}))},query:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=new URLSearchParams,s.append("shopId","00b6e25446304622afc76b9cb1493063"),s.append("userToken",""),e.next=5,t.$http.post("/user/postSelectFoodAndTypeByUserInShop",s);case 5:r=e.sent,i=r.data,t.isLoading=!1,t.Food=i,localStorage.cart&&(t.getCart(),t.$store.commit("totalPrice")),t.$nextTick((function(){t.scroll=new t.$BScroll(t.$refs.foodScroll,{probeType:3,click:!0,bounce:{top:!1}}),t.menuScroll=new t.$BScroll(t.$refs.menuScroll,{click:!0}),t.scroll.on("scroll",(function(e){if(t.scrollY=Math.abs(Math.round(e.y)),t.takeway){var s=t.$refs.header.clientHeight,r=(10-Math.ceil(t.scrollY/(s/10)))/10;t.scrollY<s-80?(t.header_styleObject.transform="translatey(-".concat(t.scrollY,"px)"),t.header_styleObject.opacity=r+.1,t.content_styleObject.transform="translatey(-".concat(t.scrollY,"px)")):(t.header_styleObject.transform="translatey(-".concat(s,"px)"),t.header_styleObject.opacity=0,t.content_styleObject.transform="translatey(-".concat(s,"px)"))}})),t.tabIndex||t.calcFoodHeight()}));case 11:case"end":return e.stop()}}),e)})))()},queryBanner:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=new URLSearchParams,s.append("shopId","00b6e25446304622afc76b9cb1493063"),e.next=4,t.$http.post("/user/postSelectAdvertisementByUser",s);case 4:r=e.sent,i=r.data,"000000"===i.messageStatus&&(t.bannerList=i.listArray);case 7:case"end":return e.stop()}}),e)})))()}}),created:function(){this.query(),this.takeway&&this.queryBanner(),this.food_styleObject["min-height"]=document.documentElement.clientHeight+"px"},computed:Object(a["a"])(Object(a["a"])({menuTitle:function(){if(this.Food)return this.Food[this.activeKey]}},Object(y["d"])(["foodList","tabIndex","takeway"])),{},{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var e=this.listHeight[t],s=this.listHeight[t+1];if(this.scrollY>=e&&this.scrollY<s){if(this.activeKey!==t){this.activeKey=t;var r=document.querySelectorAll(".menu-item")[t],i=r.clientHeight,n=Math.round(r.getBoundingClientRect().bottom),a=Math.round(r.getBoundingClientRect().top),o=document.documentElement.clientHeight;this.takeway||(a-=this.$refs.t_header.clientHeight),this.ScrollClient<=r.offsetTop?o-n<2*i&&this.menuScroll.scrollBy(0,-i,800):a<4*i&&(a>0?t>3&&this.menuScroll.scrollBy(0,i,500):this.menuScroll.scrollTo(0,0,500)),this.ScrollClient=r.offsetTop}return t}}}}),watch:{Food:{handler:function(t){var e=[];return t.forEach((function(t){t.listArray&&t.listArray.forEach((function(t){t.foodNumber>=1&&e.push(t)}))})),this.$store.commit("setFoodList",e)},deep:!0}},destroyed:function(){this.scroll.destroy(),this.menuScroll.destroy()}},_=g,w=(s("443e"),Object(p["a"])(_,r,i,!1,null,"f189de8c",null));e["default"]=w.exports},"443e":function(t,e,s){"use strict";s("4f9c")},"4f9c":function(t,e,s){},"54f4":function(t,e,s){"use strict";s("1603")},5530:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));s("a4d3"),s("4de4"),s("4160"),s("e439"),s("dbb4"),s("b64b"),s("159b");function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function i(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(Object(s),!0).forEach((function(e){r(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}},"653e":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"shopCart"}},[s("div",{staticClass:"s-box clearfix"},[s("div",{staticClass:"left fl"},[s("div",{staticClass:"sl-box",on:{click:t.handelClick}},[s("svg",{staticClass:"icon s-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-gouwuche"}})]),s("van-badge",{directives:[{name:"show",rawName:"v-show",value:t.foodLength,expression:"foodLength"}],staticClass:"shop-badge v-badge",attrs:{content:t.foodLength,max:"99"}})],1),t.foodLength?s("span",{staticClass:"price"},[t._v(t._s("￥"+t.totalPrice))]):s("span",{staticClass:"msg"},[t._v(" 购物车空空如也呢！ ")])]),s("div",{staticClass:"s-sub fr",on:{click:t.goPay}},[t._v("去结算")])]),s("van-popup",{attrs:{position:"bottom",id:"shop-popup"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticClass:"s-header"},[s("h1",{staticClass:"sh-msg"},[t._v("已选商品")]),s("div",{on:{click:t.clearShopCart}},[s("svg",{staticClass:"icon clear-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-gouwuche"}})]),s("span",[t._v("清空购物车")])])]),s("div",{ref:"cart",staticClass:"cart"},[s("div",{staticClass:"content111"},[s("food-item",{attrs:{food:t.foodList,setStyle:"s-food-item"}})],1)])])],1)},i=[],n=s("5530"),a=s("2f62"),o=s("92fe"),c={components:{"food-item":o["a"]},data:function(){return{show:!1}},methods:{goPay:function(){if(this.foodLength)return this.$router.push("/pay")},handelClick:function(){if(!this.foodLength)return this.$toast("购物车中还没有商品哦");this.show=!0},clearShopCart:function(){this.$store.commit("clearShopCart"),this.show=!1}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(a["d"])(["foodList","totalPrice"])),Object(a["b"])(["foodLength"])),{},{listData:function(){return this.$store.state.foodList}}),mounted:function(){},watch:{listData:function(t){if(0===t.length)return this.show=!1}}},l=c,d=(s("cc18"),s("2877")),u=Object(d["a"])(l,r,i,!1,null,"158d1ad8",null);e["a"]=u.exports},"6d9e":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-number-keyboard",{attrs:{id:"num-keyword",show:t.key_flag,title:"标题","extra-key":"清空","close-button-text":"完成","z-index":"100000"},on:{blur:t.onHide,input:t.onInput,delete:t.onDelete}})},i=[],n=(s("fb6a"),s("a9e3"),s("d3b7"),s("25f0"),{props:{key_flag:{type:Boolean},item:{type:Object}},data:function(){return{vt_ipt:""}},mounted:function(){var t=this;this.$nextTick((function(){var e='<h2 class="vt-msg" style="text-align: center;width: 12%;font-size:16px;font-weight:700;">数量</h2>\n      <div class="vt-ipt" style="box-sizing:border-box; height:1.7rem; line-height:1.7rem; border-radius:3px;margin-left:8px;margin-right:6px;padding:0 10px;width:67%;background-color:#fff;"></div>\n      <div class="vt-sub" style="cursor: pointer;padding:7px 12px;;font-size: 0.8rem;background-color: #fff;border-radius: 0.2rem;">确认</div>',s=document.querySelector(".van-number-keyboard__header");s.innerHTML=e,document.querySelector(".vt-sub").addEventListener("click",(function(e){t.vt_ipt?t.item.foodNumber=Number(t.vt_ipt):t.item.foodNumber=0,t.onHide()}))}))},methods:{onInput:function(t){var e=this.vt_ipt;if(e+=t,!(Number(e)>999)){this.vt_ipt=e;var s=document.querySelector(".vt-ipt");return s.innerHTML=this.vt_ipt,"清空"==t?(this.vt_ipt="",void this.setValue()):void 0}this.$toast("最高填写数量为999")},setValue:function(){var t=document.querySelector(".vt-ipt");t.innerHTML=this.vt_ipt},onDelete:function(t){var e=this.vt_ipt.toString();this.vt_ipt=e.slice(0,e.length-1),this.setValue()},onHide:function(){this.vt_ipt="",this.setValue(),this.$emit("onHide",!1)}}}),a=n,o=s("2877"),c=Object(o["a"])(a,r,i,!1,null,null,null);e["a"]=c.exports},b40c:function(t,e,s){},b64b:function(t,e,s){var r=s("23e7"),i=s("7b0b"),n=s("df75"),a=s("d039"),o=a((function(){n(1)}));r({target:"Object",stat:!0,forced:o},{keys:function(t){return n(i(t))}})},bf93:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:"loading"+t.loadingType},[1===t.loadingType?s("div",{staticClass:"spinner"},[s("div",{staticClass:"rect1"}),s("div",{staticClass:"rect2"}),s("div",{staticClass:"rect3"}),s("div",{staticClass:"rect4"}),s("div",{staticClass:"rect5"})]):2===t.loadingType?s("van-loading",{attrs:{color:"#fff",size:"40"}}):t._e()],1)},i=[],n=(s("a9e3"),{props:{loadingType:{type:Number}},name:"Loading"}),a=n,o=(s("54f4"),s("2877")),c=Object(o["a"])(a,r,i,!1,null,"48f08cce",null);e["a"]=c.exports},cc18:function(t,e,s){"use strict";s("1beb")},dbb4:function(t,e,s){var r=s("23e7"),i=s("83ab"),n=s("56ef"),a=s("fc6a"),o=s("06cf"),c=s("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,s,r=a(t),i=o.f,l=n(r),d={},u=0;while(l.length>u)s=i(r,e=l[u++]),void 0!==s&&c(d,e,s);return d}})},e29a:function(t,e,s){"use strict";s("b40c")},e439:function(t,e,s){var r=s("23e7"),i=s("d039"),n=s("fc6a"),a=s("06cf").f,o=s("83ab"),c=i((function(){a(1)})),l=!o||c;r({target:"Object",stat:!0,forced:l,sham:!o},{getOwnPropertyDescriptor:function(t,e){return a(n(t),e)}})}}]);