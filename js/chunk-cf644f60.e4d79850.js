(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf644f60"],{"10c6":function(t,e,s){},1544:function(t,e,s){},"157e":function(t,e,s){"use strict";s("7a776")},"1e6b":function(t,e,s){},5319:function(t,e,s){"use strict";var a=s("d784"),r=s("825a"),i=s("7b0b"),o=s("50c4"),n=s("a691"),c=s("1d80"),d=s("8aa5"),l=s("14c3"),f=Math.max,u=Math.min,p=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};a("replace",2,(function(t,e,s,a){var _=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=a.REPLACE_KEEPS_$0,C=_?"$":"$0";return[function(s,a){var r=c(this),i=void 0==s?void 0:s[t];return void 0!==i?i.call(s,r,a):e.call(String(r),s,a)},function(t,a){if(!_&&g||"string"===typeof a&&-1===a.indexOf(C)){var i=s(e,t,this,a);if(i.done)return i.value}var c=r(t),p=String(this),h="function"===typeof a;h||(a=String(a));var v=c.global;if(v){var k=c.unicode;c.lastIndex=0}var y=[];while(1){var w=l(c,p);if(null===w)break;if(y.push(w),!v)break;var N=String(w[0]);""===N&&(c.lastIndex=d(p,o(c.lastIndex),k))}for(var S="",x=0,A=0;A<y.length;A++){w=y[A];for(var I=String(w[0]),$=f(u(n(w.index),p.length),0),E=[],O=1;O<w.length;O++)E.push(m(w[O]));var M=w.groups;if(h){var P=[I].concat(E,$,p);void 0!==M&&P.push(M);var T=String(a.apply(void 0,P))}else T=b(I,p,$,E,M,a);$>=x&&(S+=p.slice(x,$)+T,x=$+I.length)}return S+p.slice(x)}];function b(t,s,a,r,o,n){var c=a+t.length,d=r.length,l=v;return void 0!==o&&(o=i(o),l=h),e.call(n,l,(function(e,i){var n;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return s.slice(0,a);case"'":return s.slice(c);case"<":n=o[i.slice(1,-1)];break;default:var l=+i;if(0===l)return e;if(l>d){var f=p(l/10);return 0===f?e:f<=d?void 0===r[f-1]?i.charAt(1):r[f-1]+i.charAt(1):e}n=r[l-1]}return void 0===n?"":n}))}}))},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var a=s("1d80"),r=s("5899"),i="["+r+"]",o=RegExp("^"+i+i+"*"),n=RegExp(i+i+"*$"),c=function(t){return function(e){var s=String(a(e));return 1&t&&(s=s.replace(o,"")),2&t&&(s=s.replace(n,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,s){var a=s("861d"),r=s("d2bb");t.exports=function(t,e,s){var i,o;return r&&"function"==typeof(i=e.constructor)&&i!==s&&a(o=i.prototype)&&o!==s.prototype&&r(t,o),t}},"76e0":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pay-order"},[s("nav-bar",{attrs:{title:"提交订单",link:"/index",location_search_id:t.shopId}}),s("div",{staticClass:"p-header-bg"}),s("div",{staticClass:"pay-content"},[t.takeway?s("div",{staticClass:"checkAddress",on:{click:function(e){t.show=!0}}},[s("a",{attrs:{href:"javascript:void(0);"}},[t.checkAddress?[s("div",{staticClass:"check-info"},[s("van-icon",{attrs:{name:"location-o"}}),s("div",{staticClass:"info"},[s("p",{staticClass:"address"},[t._v(" "+t._s(t.checkAddress.address+" "+t.checkAddress.addressMessage)+" ")]),s("p",{staticClass:"name"},[t._v(" "+t._s(t.checkAddress.name+" "+t.checkAddress.tel)+" ")])])],1),s("van-icon",{staticClass:"arrow-right",attrs:{name:"arrow"}})]:s("van-cell",{attrs:{title:"请选择收货地址",icon:"location-o","is-link":""}})],2)]):t._e(),s("div",{staticClass:"od-content"},[s("div",{staticClass:"order-food"},[s("div",{staticClass:"shop-info"},[s("div",{staticClass:"od-shop"},[t._v(" "+t._s(t.order_info.shopName?t.order_info.shopName:"三华科技")+" ")]),s("span",[t._v("已点菜品")])]),s("div",{staticClass:"content-box"},[s("div",{class:{"content-down":!t.flag,"content-up":t.flag}},[s("foodItem",{attrs:{food:t.$store.state.foodList,setStyle:"o-food-item"}})],1),t.foodList.length>3?s("div",{staticClass:"toggle",on:{click:function(e){t.flag=!t.flag}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:!t.flag,expression:"!flag"}]},[t._v("展示更多"),s("van-icon",{attrs:{name:"arrow-down"}})],1),s("span",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}]},[t._v("点击收起"),s("van-icon",{attrs:{name:"arrow-up"}})],1)]):t._e()]),s("div",{staticClass:"od-price"},[t._v(" 共 "+t._s(t.foodList.length)+" 件,小计: "),s("span",[t._v(t._s("￥"+t.totalPrice+"元"))])])])]),s("div",{staticClass:"pay-methods"},[t._m(0),s("div",{staticClass:"pay"},[s("van-radio-group",{model:{value:t.openMethod,callback:function(e){t.openMethod=e},expression:"openMethod"}},["WeChat"===t.openMethod?s("div",{staticClass:"pay-item"},[s("div",{staticClass:"p-method"},[s("span",{staticClass:"pay-icon"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-weixinzhifu"}})])]),s("span",{staticClass:"msg"},[t._v("微信支付")])]),s("div",{staticClass:"check"},[s("van-radio",{staticClass:"pay-check",attrs:{name:"WeChat"}})],1)]):s("div",{staticClass:"pay-item"},[s("div",{staticClass:"p-method"},[s("span",{staticClass:"pay-icon"},[s("svg",{staticClass:"icon Alipay",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-zhifubao"}})])]),s("span",{staticClass:"msg"},[t._v("支付宝支付")])]),s("div",{staticClass:"check"},[s("van-radio",{staticClass:"pay-check",attrs:{name:"AliPay"}})],1)])])],1)]),s("router-link",{staticClass:"pay-notes clearfix",attrs:{to:{name:"note",params:{data:t.noteStr}}}},[s("span",{staticClass:"note-msg fl"},[t._v("订单备注")]),s("div",{staticClass:"note-box fr"},[s("span",{staticClass:"note-router van-ellipsis"},[t._v(t._s(t.noteStr?t.noteStr:"点击填写备注"))]),s("van-icon",{staticClass:"note-icon",attrs:{name:"arrow"}})],1)])],1),s("div",{staticClass:"pay-fot clearfix"},[s("div",{staticClass:"p-left fl"},[s("div",{staticClass:"p-box"},[s("span",{staticClass:"p-msg"},[t._v("共计: ")]),s("span",{staticClass:"p-price"},[t._v(t._s("￥"+t.totalPrice))])])]),s("div",{staticClass:"p-sub fr",on:{click:t.pay}},[t._v("去支付")])]),t.takeway?s("van-action-sheet",{staticClass:"checkAddress-popup",attrs:{title:"选择收货地址"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticStyle:{position:"reletive"}},[s("div",{staticClass:"content"},[t.address_list.length?[s("p",{staticClass:"title"},[t._v("可选地址")]),s("div",{staticClass:"address-list"},[s("van-radio-group",{attrs:{"checked-color":"#2cb5a5"},on:{change:t.change},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._l(t.address_list,(function(e,a){return[s("div",{key:a,staticClass:"item"},[s("van-radio",{attrs:{name:a}},[s("div",{staticClass:"info"},[s("p",{staticClass:"address"},[t._v(" "+t._s(e.address+" "+e.addressMessage)+" ")]),s("p",[s("span",[t._v(t._s(e.name+" "+e.tel))])])])])],1)]}))],2)],1)]:t._e(),t.address_list.length||t.not_address_list.length?t._e():s("h2",{staticStyle:{"font-size":"20px","margin-top":"25%","text-align":"center"}},[t._v(" 还没有地址嗷~ ")]),t.not_address_list.length?[s("p",{staticClass:"title not"},[t._v("以下地址超出配送范围")]),s("div",{staticClass:"address-list gray"},t._l(t.not_address_list,(function(e){return s("div",{key:e.id,staticClass:"item"},[s("div",{staticClass:"info"},[s("p",{staticClass:"address"},[t._v(" "+t._s(e.address+" "+e.addressMessage)+" ")]),s("p",[s("span",[t._v(t._s(e.name+" "+e.tel))])])])])})),0)]:t._e()],2),s("a",{staticClass:"add-address",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.$router.push({path:"/addaddress",query:{type:"pay"}})}}},[t._v("新增地址")])])]):t._e()],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("p",[t._v("支付方式")]),s("p",[t._v("在线支付")])])}],i=(s("99af"),s("4de4"),s("c740"),s("4160"),s("a434"),s("b0c0"),s("d3b7"),s("ac1f"),s("3ca3"),s("5319"),s("159b"),s("ddb0"),s("2b3d"),s("96cf"),s("1da1")),o=s("5530"),n=s("d968"),c=s("92fe"),d=s("2f62"),l={components:{NavBar:n["a"],foodItem:c["a"]},data:function(){return{radio:"1",show:!1,flag:!1,noteStr:"",order_info:{shopId:"",shopName:"",orderTime:(new Date).getTime(),orderType:"forHere",tableNumber:"测试二号桌",userName:"",userPhone:"",orderPice:"",orderMessage:"",userAddress:"",orderUserId:""},address_list:[],not_address_list:[],checkAddress:null}},computed:Object(o["a"])({},Object(d["d"])(["foodList","openMethod","totalPrice","shopName","shopId","takeway"])),mounted:function(){if(this.onpopstate(),!this.foodList.length){var t=JSON.parse(localStorage.getItem("cart"));t&&this.$store.commit("setFoodList",t)}this.$route.params.data&&(this.noteStr=this.$route.params.data)},created:function(){var t=this;this.takeway&&(this.order_info.orderType="takeOut"),this.order_info.orderUserId=this.$store.state.token,this.order_info.shopId=this.shopId,console.log(this.shopId);var e=JSON.parse(localStorage.getItem("param"));e&&e.pay_picker_poi&&(this.checkAddress=e.pay_picker_poi);var s=JSON.parse(localStorage.getItem("Allcart")),a=s.findIndex((function(e){return e.id===t.shopId}));this.order_info.shopName=s[a].shopName,this.getAddress()},methods:{getOrder:function(t,e){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,i,o,n,c,d,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("confirm"!==t){a.next=17;break}for(c in r=[],o=s.order_info,s.foodList.forEach((function(t){var e=t.foodId,s=t.foodNumber;i="".concat(e,":").concat(s),r.push(i)})),o.orderMessage=JSON.stringify(r),o.orderPice=s.totalPrice,n=new URLSearchParams,n.append("payType","wechat"),n.append("orderRemarks",s.noteStr),o)n.append(c,o[c]);return a.next=12,s.$http.post("/user/postAddOrder",n);case 12:d=a.sent,l=d.data,l&&setTimeout((function(){if(e(),"000000"===l.messageStatus){s.$toast("成功");var t=JSON.parse(localStorage.getItem("Allcart")),a=t.findIndex((function(t){return t.id===s.shopId}));t.splice(a,1);var r={list:t,type:1};s.$store.commit("set_All_foodList",r),s.$store.commit("clearShopCart"),s.$router.replace({path:"/index",query:{shop_id:s.$store.state.shopId}})}else s.$toast("失败")}),2e3),a.next=18;break;case 17:e();case 18:case"end":return a.stop()}}),a)})))()},getAddress:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=new URLSearchParams,s.append("shopId",t.shopId),s.append("userToken",t.$store.state.token),e.next=5,t.$http.post("/user/postSelectAddressByCouldSend",s);case 5:a=e.sent,r=a.data,console.log(r),"000000"===r.messageStatus&&r.listArray.filter((function(e){return"Y"===e.isCouldSend?t.address_list.push(e):t.not_address_list.push(e)}));case 9:case"end":return e.stop()}}),e)})))()},change:function(t){this.checkAddress=this.address_list[t],this.show=!1,console.log(this.checkAddress);var e=JSON.parse(localStorage.getItem("param"));e&&(e.pay_picker_poi||(e.pay_picker_poi={}),e.pay_picker_poi.name=this.checkAddress.name,e.pay_picker_poi.tel=this.checkAddress.tel,e.pay_picker_poi.address=this.checkAddress.address,e.pay_picker_poi.addressMessage=this.checkAddress.addressMessage),localStorage.setItem("param",JSON.stringify(e))},pay:function(){return this.takeway&&!this.checkAddress?this.$toast("请选择收货地址"):(this.order_info.userName=this.checkAddress.name,this.order_info.userPhone=this.checkAddress.tel,this.order_info.userAddress=this.checkAddress.address+" "+this.checkAddress.addressMessage,this.$confirm({title:"提示",message:"确定提交订单吗?",beforeClose:this.getOrder}),"WeChat"===this.openMethod?this.$toast("微信支付"):void ap.tradePay({tradeNO:"2021011222001150051432529580"},(function(t){ap.alert(t.resultCode)})))},onpopstate:function(){window.addEventListener("popstate",this.back,!1)},back:function(){this.$router.replace("/")}},destroyed:function(){window.removeEventListener("popstate",this.back,!1)}},f=l,u=(s("157e"),s("2877")),p=Object(u["a"])(f,a,r,!1,null,"7bf82b0c",null);e["default"]=p.exports},"7a776":function(t,e,s){},"857a":function(t,e,s){var a=s("1d80"),r=/"/g;t.exports=function(t,e,s,i){var o=String(a(t)),n="<"+e;return""!==s&&(n+=" "+s+'="'+String(i).replace(r,"&quot;")+'"'),n+">"+o+"</"+e+">"}},"85aa":function(t,e,s){"use strict";s("1e6b")},"88fb":function(t,e,s){"use strict";s("10c6")},"92fe":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.food,(function(e,a){return s("div",{key:a,staticClass:"food-item",class:t.setStyle},[s("div",{staticClass:"item"},[s("a",{staticClass:"food-img",attrs:{href:"javascript:void(0);"}},[s("img",{attrs:{src:e.foodPicVal}})]),s("div",{staticClass:"food-info"},[s("div",{staticClass:"food-name"},[s("div",{staticClass:"font18 fn"},[s("span",{staticClass:"name van-ellipsis"},[t._v(t._s(e.foodName))]),"o-food-item"===t.setStyle?s("span",{staticClass:"price"},[t._v(t._s("￥"+e.foodPice))]):t._e()]),s("p",{staticClass:"food-msg van-ellipsis"},[t._v(" "+t._s(t.setStyle?e.unit:e.foodMessage)+" ")])]),"o-food-item"!==t.setStyle?s("div",{staticClass:"food-i"},[s("div",{staticClass:"food-price"},[s("span",{staticClass:"price"},[t._v("￥"+t._s(e.foodPice))]),s("span",{staticClass:"origin-price"},[t._v("￥"+t._s(e.foodPiceOriginal))])]),s("div",{staticClass:"food-btn-group"},[s("transition",{attrs:{name:"roll"}},[s("a",{directives:[{name:"show",rawName:"v-show",value:e.foodNumber>=1,expression:"item1.foodNumber >= 1"}],staticClass:"sub",attrs:{href:"javascript:void(0);"},on:{click:function(s){return t.sub(e)}}},[t._v("▬")])]),t.setStyle?[s("transition",{attrs:{name:"roll1"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.foodNumber>=1,expression:"item1.foodNumber >= 1"}],staticClass:"count"},[t._v(t._s(e.foodNumber))])])]:[s("span",{directives:[{name:"show",rawName:"v-show",value:e.foodNumber>=1,expression:"item1.foodNumber >= 1"}],staticClass:"ipt-count",on:{click:function(s){return t.change(e)}}},[t._v(t._s(e.foodNumber))])],s("a",{staticClass:"add",attrs:{href:"javascript:void(0);"},on:{click:function(s){return t.add(e)}}},[t._v("✚")])],2)]):s("div",{staticClass:"food-i"},[s("div",{staticClass:"food-num"},[s("span",[t._v("x")]),t._v(" "+t._s(+e.foodNumber))])])])])])})),0)},r=[],i=(s("a9e3"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"choose"},[s("a",{attrs:{href:"javascript:;"}},[s("span",[t._v("选规格")])])])}],n={props:{item:{type:"object"}}},c=n,d=(s("85aa"),s("2877")),l=Object(d["a"])(c,i,o,!1,null,"113c6489",null),f=l.exports,u={props:{food:{type:Array},setStyle:{type:String,default:""}},components:{"f-choose":f},data:function(){return{}},methods:{add:function(t){t.foodNumber=Number(t.foodNumber+=1)},sub:function(t){t.foodNumber=Number(t.foodNumber-=1)},change:function(t){this.$emit("handelFocus",t)}}},p=u,h=(s("db0a"),Object(d["a"])(p,a,r,!1,null,"1c041bb7",null));e["a"]=h.exports},9911:function(t,e,s){"use strict";var a=s("23e7"),r=s("857a"),i=s("af03");a({target:"String",proto:!0,forced:i("link")},{link:function(t){return r(this,"a","href",t)}})},a434:function(t,e,s){"use strict";var a=s("23e7"),r=s("23cb"),i=s("a691"),o=s("50c4"),n=s("7b0b"),c=s("65f0"),d=s("8418"),l=s("1dde"),f=s("ae40"),u=l("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,v=Math.min,m=9007199254740991,_="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!u||!p},{splice:function(t,e){var s,a,l,f,u,p,g=n(this),C=o(g.length),b=r(t,C),k=arguments.length;if(0===k?s=a=0:1===k?(s=0,a=C-b):(s=k-2,a=v(h(i(e),0),C-b)),C+s-a>m)throw TypeError(_);for(l=c(g,a),f=0;f<a;f++)u=b+f,u in g&&d(l,f,g[u]);if(l.length=a,s<a){for(f=b;f<C-a;f++)u=f+a,p=f+s,u in g?g[p]=g[u]:delete g[p];for(f=C;f>C-a+s;f--)delete g[f-1]}else if(s>a)for(f=C-a;f>b;f--)u=f+a-1,p=f+s-1,u in g?g[p]=g[u]:delete g[p];for(f=0;f<s;f++)g[f+b]=arguments[f+2];return g.length=C-a+s,l}})},a9e3:function(t,e,s){"use strict";var a=s("83ab"),r=s("da84"),i=s("94ca"),o=s("6eeb"),n=s("5135"),c=s("c6b6"),d=s("7156"),l=s("c04e"),f=s("d039"),u=s("7c73"),p=s("241c").f,h=s("06cf").f,v=s("9bf2").f,m=s("58a8").trim,_="Number",g=r[_],C=g.prototype,b=c(u(C))==_,k=function(t){var e,s,a,r,i,o,n,c,d=l(t,!1);if("string"==typeof d&&d.length>2)if(d=m(d),e=d.charCodeAt(0),43===e||45===e){if(s=d.charCodeAt(2),88===s||120===s)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+d}for(i=d.slice(2),o=i.length,n=0;n<o;n++)if(c=i.charCodeAt(n),c<48||c>r)return NaN;return parseInt(i,a)}return+d};if(i(_,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var y,w=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof w&&(b?f((function(){C.valueOf.call(s)})):c(s)!=_)?d(new g(k(e)),s,w):k(e)},N=a?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),S=0;N.length>S;S++)n(g,y=N[S])&&!n(w,y)&&v(w,y,h(g,y));w.prototype=C,C.constructor=w,o(r,_,w)}},af03:function(t,e,s){var a=s("d039");t.exports=function(t){return a((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},c740:function(t,e,s){"use strict";var a=s("23e7"),r=s("b727").findIndex,i=s("44d2"),o=s("ae40"),n="findIndex",c=!0,d=o(n);n in[]&&Array(1)[n]((function(){c=!1})),a({target:"Array",proto:!0,forced:c||!d},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(n)},d968:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav"},[s("div",{staticClass:"b"},[s("van-icon",{staticClass:"nav-arrow-left",attrs:{name:"arrow-left"},on:{click:t.navigator}}),s("div",{staticClass:"nav-title"},[t._v(t._s(t.title))])],1)])},r=[],i=(s("ac1f"),s("5319"),s("9911"),{props:["title","link","location_search_id"],methods:{navigator:function(){"/"===this.link?(this.$store.commit("checkTab",2),this.$router.go(-1)):"/index"===this.link?(console.log("ok"),this.$router.replace({path:"/index",query:{shop_id:this.location_search_id}})):this.$router.go(-1)}}}),o=i,n=(s("88fb"),s("2877")),c=Object(n["a"])(o,a,r,!1,null,"3579abc0",null);e["a"]=c.exports},db0a:function(t,e,s){"use strict";s("1544")}}]);