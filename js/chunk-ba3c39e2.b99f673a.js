(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ba3c39e2"],{"1b0e":function(t,e,i){},"1e4b":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"index"}},[t.shop_flag?[i("div",{ref:"header",style:t.takeway?t.header_styleObject:"",attrs:{id:"header"}},[t.takeway?i("div",{ref:"take",staticClass:"takeway-header"},[i("div",{staticClass:"u-addess"},[t.takeway&&t.takeway_shop?[i("div",{staticClass:"address"},[i("div",[i("router-link",{attrs:{to:"/checkAddress"}},["定位失败"===t.address?i("svg",{staticClass:"icon add-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-dingwei"}})]):i("svg",{staticClass:"icon add-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-dingwei1"}})]),i("div",{staticClass:"addressName van-ellipsis"},[t._v(t._s(t.address))]),i("van-icon",{staticClass:"arrow-right",attrs:{name:"arrow"}})],1)],1)]),i("div",{staticClass:"user",on:{click:function(e){return t.$router.push("/mine")}}},[i("van-icon",{staticClass:"icon-user",attrs:{name:"manager"}})],1)]:[i("div",{staticClass:"f_header"},[i("van-icon",{staticClass:"nav-arrow-left",attrs:{name:"arrow-left"},on:{click:function(e){return t.$router.replace("/home")}}}),i("h2",[t._v(t._s(t.shopName))])],1)]],2),i("van-notice-bar",{attrs:{scrollable:!1,text:"特惠：满15减5、满20减10、满30减20"}}),i("banner",{attrs:{bannerList:t.bannerList}})],1):i("div",{ref:"t_header",staticClass:"t-header"},[i("div",{staticClass:"tab-item",class:{"tab-item-active":0===t.tabIndex},on:{click:function(e){return t.check(0)}}},[t._v(" 点餐 ")]),i("div",{staticClass:"tab-item",class:{"tab-item-active":t.tabIndex},on:{click:function(e){return t.check(1)}}},[t._v(" 订单 ")])])]),i("div",{ref:"content",staticClass:"s_content",class:{o_content:t.tabIndex,take_content:t.takeway},style:[t.takeway?t.content_styleObject:"",{paddingBottom:1===t.tab_index?"60px":"0"}]},[t.takeway?i("div",{staticClass:"tab"},[i("div",{staticClass:"tab-item",class:{"tab-active":1===t.tab_index},on:{click:function(e){return t.tabChange(1)}}},[t._v(" 点菜 "),i("span",{style:{transform:"translateX("+(1===t.tab_index?"0%":"100%")+")"}})]),i("div",{staticClass:"tab-item",class:{"tab-active":2===t.tab_index},on:{click:function(e){return t.tabChange(2)}}},[t._v(" 评价 ")])]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.tabIndex,expression:"!tabIndex"}],staticClass:"content"},[i("div",{staticClass:"content-box",style:{transform:"translateX("+(1===t.tab_index?"0%":"-100%")+")"}},[i("div",{staticClass:"index clearfix"},[i("div",{ref:"menuScroll",staticClass:"d_cate fl"},[i("ul",{staticClass:"menu"},t._l(t.Food,(function(e,s){return i("li",{key:e.key,staticClass:"menu-item",class:{"menu-item-acitve":s===t.currentIndex},on:{click:function(e){return t.handelClick(s)}}},[i("a",{attrs:{href:"javascript:void(0);"}},[i("p",[t._v(t._s(e.food_type_name))]),i("div",t._l(e.iconArr,(function(e,s){return i("span",{key:s,domProps:{innerHTML:t._s(e)}})})),0)]),i("van-badge",{directives:[{name:"show",rawName:"v-show",value:t.reNum(e.listArray),expression:"reNum(item.listArray)"}],staticClass:"v-badge",attrs:{content:t.reNum(e.listArray),max:"99"}})],1)})),0)]),i("div",{staticClass:"d_food_list fr"},[i("div",{staticClass:"food-card-header clearfix"},[i("div",{staticClass:"menu-title fl clearfix"},[i("div",{staticClass:"title fl van-ellipsis"},[i("span",[t._v(t._s(t.menuTitle?t.menuTitle.food_type_name:""))])])]),i("div",{staticClass:"search fr",on:{click:function(e){return t.$router.push({path:"/query",query:{shop_id:t.shopId}})}}},[i("svg",{staticClass:"icon search-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-sousuo"}})]),i("span",[t._v("搜索")])])]),i("div",{ref:"foodScroll",attrs:{id:"food"}},[i("div",{staticClass:"wrapper"},t._l(t.Food,(function(e,s){return i("div",{key:s,staticClass:"foodBox",style:s===t.Food.length-1?t.food_styleObject:""},[i("div",{staticClass:"food-item-title"},[0!==s?[i("span",{staticClass:"food-title"},[t._v(t._s(e.food_type_name))]),t._l(e.iconArr,(function(e,s){return i("span",{key:s,domProps:{innerHTML:t._s(e)}})}))]:t._e()],2),i("food-item",{attrs:{food:e.listArray},on:{handelFocus:t.showKey}})],1)})),0)])])]),t.takeway?i("div",{ref:"evaluate",staticClass:"evaluate"},[i("div",{staticClass:"box"},[t._l(t.evaluate_list,(function(e,s){return i("div",{key:s,staticClass:"eval-item"},[i("div",{staticClass:"u-avatar"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.consumerPath?e.consumerPath:t.defaultAvatar,expression:"\n                      item.consumerPath ? item.consumerPath : defaultAvatar\n                    "}]})]),i("div",{staticClass:"eval-info"},[i("div",{staticClass:"info"},[i("div",{staticClass:"score"},[i("p",{staticClass:"name"},[t._v(t._s(e.consumerName))]),i("p",{staticClass:"sco"},[i("span",[t._v("评分:")]),i("van-rate",{attrs:{size:"12",color:"#ffd21e",readonly:""},model:{value:e.shopCopies,callback:function(i){t.$set(e,"shopCopies",i)},expression:"item.shopCopies"}})],1)]),i("span",{staticClass:"time"},[t._v(t._s(t.evalDate(e.sysDate)))])]),i("div",{staticClass:"eval-msg"},[t._v(" "+t._s(e.evaluateMessage)+" ")]),i("div",{staticClass:"eval-imgs-list"},t._l(e.evaluatePicArray,(function(s,a){return i("div",{key:a,staticClass:"item"},[i("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:s,expression:"img_item",arg:"background-image"}],staticClass:"img",on:{click:function(i){return t.showPreview(e.evaluatePicArray,a)}}})])})),0)])])})),t.finished?i("div",{staticClass:"finshed-msg"},[t._v("评价都被你看光了~")]):t._e()],2),t.loading?i("loading",{attrs:{loadingType:5}}):t._e()],1):t._e()])]),t.takeway?t._e():[i("order",{directives:[{name:"show",rawName:"v-show",value:t.tabIndex,expression:"tabIndex"}]})]],2),i("key-board",{attrs:{key_flag:t.show,item:t.item},on:{onHide:t.closeKey}}),i("shop-cart",{directives:[{name:"show",rawName:"v-show",value:1===t.tab_index&&!t.tabIndex,expression:"tab_index === 1 && !tabIndex"}]})]:[t.takeway?i("Skeleton"):t._e()],t.takeway?t._e():[t.isLoading?i("loading"):t._e()]],2)},a=[],o=(i("99af"),i("4de4"),i("7db0"),i("4160"),i("c975"),i("d81d"),i("fb6a"),i("b0c0"),i("a9e3"),i("d3b7"),i("3ca3"),i("159b"),i("ddb0"),i("2b3d"),i("2909")),n=(i("96cf"),i("1da1")),r=i("5530"),c=i("ade3"),l=i("bf93"),d=i("6d9e"),h=i("653e"),u=i("92fe"),f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"orderScroll",staticClass:"order"},[t.isLoading?t._e():["[]"!==JSON.stringify(t.order_list)?i("div",{staticClass:"wrapper"},t._l(t.order_list,(function(e){return i("div",{key:e.orderId,staticClass:"order-item",on:{click:function(i){return t.orderDetail(e.orderId)}}},[i("div",{staticClass:"order-item-header clearfix"},[i("div",{staticClass:"fl shop-order"},[i("span",{staticClass:"os-name van-ellipsis"},[t._v(t._s(e.shopName+"—"+e.tableNumber))]),i("span",{staticClass:"os-time van-ellipsis"},[t._v(t._s(t._f("dateFormat")(e.orderTime)))])]),i("div",{staticClass:"fr order-status"},["holdPay"===e.orderStatus?i("span",[t._v("未支付")]):"complte"===e.orderStatus?i("span",[t._v("已完成")]):"payComplte"===e.orderStatus?i("span",[t._v("已支付")]):i("span",[t._v("订单状态未知")])])]),i("div",{staticClass:"o-centent"},[i("ul",{staticClass:"box",class:e.toggle_flag||void 0===e.toggle_flag?"content-up":"content-down"},t._l(e.orderMessage,(function(e,s){return i("li",{key:s,staticClass:"food-item clearfix"},[i("div",{staticClass:"food-info fl"},[i("p",{staticClass:"food-name"},[t._v(t._s(e.name))]),i("span",{staticClass:"food-num"},[t._v(t._s(e.num))])]),i("p",{staticClass:"food-price fr"},[t._v(t._s("￥"+e.foodPice+"元"))])])})),0),void 0!==e.toggle_flag?i("div",{staticClass:"toggle",on:{click:function(i){return i.stopPropagation(),t.toggle(e)}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!e.toggle_flag,expression:"!item.toggle_flag"}]},[t._v("展示更多"),i("van-icon",{attrs:{name:"arrow-down"}})],1),i("span",{directives:[{name:"show",rawName:"v-show",value:e.toggle_flag,expression:"item.toggle_flag"}]},[t._v("点击收起"),i("van-icon",{attrs:{name:"arrow-up"}})],1)]):t._e()]),i("div",{staticClass:"order-item-fotter clearfix"},[i("p",{staticClass:"order-item-msg fr"},[t._v(" 共"+t._s(t.count(e.orderMessage))+"份商品，实付:￥"+t._s(e.orderPice)+"元 ")])])])})),0):i("div",{staticClass:"empty"},[i("h1",{staticStyle:{"margin-top":"100px","text-align":"center","font-size":"20px"}},[t._v(" 没有订单 ")])])],t.isLoading?i("loading",{attrs:{loadingType:2}}):t._e()],2)},v=[],m={components:{Loading:l["a"]},data:function(){return{flag:!1,query_info:{tableNumber:"测试2号桌",shopId:"",pageStr:"0"},order_list:[],isLoading:!0}},methods:{toggle:function(t){var e=this;console.log(1),t.toggle_flag=!t.toggle_flag,this.$nextTick((function(t){e.scroll.refresh()}))},queryOrder:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i,s,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(s in t.isLoading=!0,i=new URLSearchParams,t.query_info)i.append(s,t.query_info[s]);return e.next=5,t.$http.post("/user/postSelectAllOrderByOrderUserId",i);case 5:a=e.sent,o=a.data,t.isLoading=!1,"000000"===o.messageStatus&&(o.listArray&&(o.listArray.filter((function(t){t.orderMessage.length>8&&(t.toggle_flag=!1)})),t.order_list=o.listArray),t.$nextTick((function(){t.scroll?t.scroll.refresh():t.scroll=new t.$BScroll(t.$refs.orderScroll,{click:!0})})));case 9:case"end":return e.stop()}}),e)})))()},orderDetail:function(t){this.$router.push({path:"/detail",query:{o_id:t}})},q:function(){this.query_info.shopId=this.$store.state.shopId,this.queryOrder()}},created:function(){this.q()},computed:{tabIndex:function(){return this.$store.state.tabIndex},count:function(){return function(t){var e=0;return t.filter((function(t){e+=Number(t.num)})),e}}},watch:{tabIndex:function(t){t&&this.q()}}},p=m,g=(i("a55e"),i("2877")),b=Object(g["a"])(p,f,v,!1,null,"f3f4366e",null),y=b.exports,_=i("2f62"),w=i("5c4c"),C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index-skeleton"},[t._m(0),i("div",{staticClass:"container"},[i("div",{staticClass:"left"},[i("ul",t._l(10,(function(e,s){return i("li",{key:s},[t._m(1,!0)])})),0)]),i("div",{staticClass:"right"},[i("div",{staticClass:"cart-header"}),i("div",{staticClass:"food"},t._l(8,(function(e,s){return i("div",{key:e,staticClass:"item"},[i("div",{staticClass:"avatar"}),t._m(2,!0)])})),0)])])])},x=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header-skeleton"},[i("div",{staticClass:"header"},[i("div",{staticClass:"left"}),i("div",{staticClass:"right"})]),i("div",{staticClass:"notice-bar"},[i("div",{staticClass:"txt"})]),i("div",{staticClass:"banner"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{attrs:{href:"javascript:void(0);"}},[i("span")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"info"},[i("div",{staticClass:"food-info"},[i("p",{staticClass:"name"}),i("p",{staticClass:"msg"})]),i("div",{staticClass:"price"},[i("div",{staticClass:"f-price"}),i("div",{staticClass:"btn-group"})])])}],k={data:function(){return{}}},S=k,$=(i("641a"),Object(g["a"])(S,C,x,!1,null,"3339c563",null)),O=$.exports,L=i("28a2"),I={components:Object(c["a"])({foodItem:u["a"],Banner:w["a"],shopCart:h["a"],order:y,loading:l["a"],keyBoard:d["a"],Skeleton:O,Loading:l["a"]},L["a"].Component.name,L["a"].Component),data:function(){return{header_styleObject:{transform:"",transition:"0.2s linear",opacity:""},content_styleObject:{transform:"",transition:"0.2s linear"},food_styleObject:{"margin-bottom":"0","min-height":""},isLoading:!0,show:!1,item:{},vt_ipt:"",scrollY:0,listHeight:[],activeKey:0,Food:[],bannerList:[],ScrollClient:0,address:"定位中...",shop_flag:!1,lng:"",lat:"",tab_index:1,evaluate_page:1,evaluate_total:0,loading:!1,finished:!1,evaluate_list:[],imgPreviewList:[],defaultAvatar:i("1195")}},methods:Object(r["a"])(Object(r["a"])({checkVisible:function(){var t=this.$refs.header.getBoundingClientRect().y,e=this.$refs.header.clientHeight;return Math.abs(t)===Math.abs(e)},initHeader:function(t,e){this.$refs.header.getBoundingClientRect().y<0&&(this.header_styleObject.transform="translatey(-".concat(t,"px)"),this.header_styleObject.opacity=e+.1,this.content_styleObject.transform="translatey(-".concat(t,"px)"))},tabChange:function(t){var e=this,i=this.$refs.header.clientHeight;this.tab_index!==t&&(this.tab_index=t,console.log(this.tab_index),2!==t||this.evaluate_list.length?1===t&&!this.scrollY&&this.checkVisible()&&this.scroll.scrollTo(0,-(i-i/2+1)):setTimeout((function(){e.loading=!0,e.query_shop_evaluate()}),300))},onLoad:function(){var t=this;this.evaluate_list.length<this.evaluate_total?(this.loading=!0,setTimeout((function(){t.evaluate_page+=1,t.query_shop_evaluate()}),300)):(this.finished=!0,this.evaluate_scroll.closePullUp())},query_shop_evaluate:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=new URLSearchParams,i.append("shopId",t.shopId),i.append("pageStr",t.evaluate_page),e.next=5,t.$http.post("/user/postSelectOrderEvaluateByShopId",i);case 5:s=e.sent,a=s.data,"000000"===a.messageStatus&&(a.listArray.map((function(t){return t.shopCopies=Number(t.shopCopies)})),t.evaluate_list=[].concat(Object(o["a"])(t.evaluate_list),Object(o["a"])(a.listArray)),t.evaluate_total=a.total,t.loading=!1),t.$nextTick((function(e){t.evaluate_scroll?(t.evaluate_scroll.finishPullUp(),t.evaluate_scroll.refresh()):(t.evaluate_scroll=new t.$BScroll(t.$refs.evaluate,{probeType:3,click:!0,bounce:{top:!0,bottom:!1},pullUpLoad:{threshold:80},observeDOM:!1,bounceTime:300}),t.evaluate_scroll.on("scroll",(function(e){var i=Math.round(e.y);if(t.takeway){var s=t.$refs.header.clientHeight,a=(10-Math.ceil(i/(s/10)))/10;i<0?(i=Math.abs(i),i<s-s/1.3&&!t.checkVisible()?t.initHeader(i,a):(t.header_styleObject.transform="translatey(-".concat(s,"px)"),t.header_styleObject.opacity=0,t.content_styleObject.transform="translatey(-".concat(s,"px)"))):t.initHeader(0,1)}})),t.evaluate_scroll.on("pullingUp",(function(){t.onLoad()})))}));case 9:case"end":return e.stop()}}),e)})))()},showPreview:function(t,e){Object(L["a"])({images:t,startPosition:e,closeable:!0})},checkAddress:function(){console.log(1)}},Object(_["c"])(["checkTab","setMethod","setAddress","setpositionFlag","setShopId","set_All_foodList","set_shopName"])),{},{check:function(t){var e=this;t!==this.tabIndex&&(this.checkTab(t),t||this.$nextTick((function(){e.calcFoodHeight(),e.scroll.refresh(),e.menuScroll.refresh()})))},getCart:function(){var t=this;if(localStorage.Allcart&&"[]"!==JSON.stringify(localStorage.Allcart)){var e=JSON.parse(localStorage.Allcart),i=e.find((function(e){return e.id==t.shopId}));if(i){var s=i.list,a=[];s.filter((function(t){return a.push(t.foodId)})),this.$store.state.foodList=e,this.Food.forEach((function(t){t.listArray&&t.listArray.forEach((function(t){-1!=a.indexOf(t.foodId)&&(t.foodNumber=s[a.indexOf(t.foodId)].foodNumber)}))}))}}},handelClick:function(t){var e=this.$refs.foodScroll.querySelectorAll(".foodBox");this.scroll.scrollToElement(e[t],200)},showMsg:function(){this.$alert({title:"公告",message:"公告:有问题可咨询客服1999999999999 (微信同号) !"})},reNum:function(t){if(t){var e=0;return t.filter((function(t){t.foodNumber&&(e+=Number(t.foodNumber))})),e}},closeKey:function(t){this.show=t},showKey:function(t){console.log(t),this.item=t,this.show=!0},calcFoodHeight:function(){var t=this;this.shop_flag&&this.$nextTick((function(){var e=t.$refs.foodScroll.querySelectorAll(".foodBox"),i=0;t.listHeight.push(i);for(var s=0;s<e.length;s++)i+=e[s].clientHeight,t.listHeight.push(i)}))},query:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=new URLSearchParams,i.append("shopId",t.shopId),i.append("userToken",""),e.next=5,t.$http.post("/user/postSelectFoodAndTypeByUserInShop",i);case 5:s=e.sent,a=s.data,"999999"===a.messageStatus?(t.shop_flag=!1,t.$toast("店铺已下架")):(t.shop_flag=!0,t.Food=a,a[a.length-1].listArray.length>7&&(t.food_styleObject["min-height"]="1000px"),t.set_shopName(t.Food[0].shopName),localStorage.cart&&t.getCart(),t.$nextTick((function(){t.scroll=new t.$BScroll(t.$refs.foodScroll,{probeType:3,click:!0,bounce:{top:!1},observeDOM:!1}),t.menuScroll=new t.$BScroll(t.$refs.menuScroll,{click:!0,bounce:{top:!1},observeDOM:!1}),t.scroll.on("scroll",(function(e){if(t.scrollY=Math.abs(Math.round(e.y)),t.takeway){var i=t.$refs.header.clientHeight,s=(10-Math.ceil(t.scrollY/(i/10)))/10;t.scrollY<i-i/2?t.initHeader(t.scrollY,s):(t.header_styleObject.transform="translatey(-".concat(i,"px)"),t.header_styleObject.opacity=0,t.content_styleObject.transform="translatey(-".concat(i,"px)"))}})),t.tabIndex||t.calcFoodHeight()}))),t.isLoading=!1;case 9:case"end":return e.stop()}}),e)})))()},queryBanner:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i,s,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=new URLSearchParams,i.append("shopId",t.shopId),e.next=4,t.$http.post("/user/postSelectAdvertisementByUser",i);case 4:s=e.sent,a=s.data,"000000"===a.messageStatus&&(o=0,a.listArray.forEach((function(t){t.advertisementPicPath||o++})),o<3&&(t.bannerList=a.listArray));case 7:case"end":return e.stop()}}),e)})))()},getLocation:function(){var t=this,e=new AMap.Geolocation({enableHighAccuracy:!0});e.getCurrentPosition((function(e,i){if("complete"==e){t.setpositionFlag(!0);var s={lng:i.position.lng,lat:i.position.lat};t.getAddress(s)}else t.getCurrentCityPostion()}))},getAddress:function(t){var e=this,i=t.lng+","+t.lat,s=new AMap.Geocoder({city:e.city,radius:500,extensions:"all"});s.getAddress(i,(function(i,s){if(console.log(s,i),"complete"===i&&s.regeocode){var a=s.regeocode,o={initPosition:{}};if(a.aois.length){var n=a.aois[0];e.address=n.name,o.initPosition.lng=n.location.lng,o.initPosition.lat=n.location.lat,o.addressName=n.name}else{var r=a.addressComponent.township,c=a.formattedAddress,l=c.indexOf(r);l+=r.length;var d=c.slice(l);e.address=d,o.addressName=d,o.initPosition.lng=t.lng,o.initPosition.lat=t.lat}if(o.initPosition.province=a.addressComponent.province,o.initPosition.city=a.addressComponent.city,o.initPosition.district=a.addressComponent.district,a.pois.length){var h=a.pois.slice(1,6);o.pois=h}localStorage.setItem("param",JSON.stringify(o)),e.setAddress(o)}}))},getCurrentCityPostion:function(){var t=this,e=setInterval(Object(n["a"])(regeneratorRuntime.mark((function i(){var s,a,o,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!t.$store.state.city){i.next=9;break}return clearInterval(e),s=new URLSearchParams,s.append("shopAddressCity",t.$store.state.city),i.next=6,t.$http.post("/user/postSelectShopCoordinateByCity",s);case 6:a=i.sent,o=a.data,"000000"===o.messageStatus&&(n={lng:o.phone_x,lat:o.phone_y},t.getAddress(n));case 9:case"end":return i.stop()}}),i)}))),100)}}),created:function(){this.setShopId(this.$route.query.shop_id),this.shopId=this.$route.query.shop_id,this.takeway&&(this.queryBanner(),this.takeway&&this.takeway_shop&&(this.initAddress&&"{}"!==JSON.stringify(this.initAddress)?this.initAddress.address?this.address=this.initAddress.address:this.initAddress.addressName?this.address=this.initAddress.addressName:this.address="定位失败,请选择收货地址":this.getLocation()))},mounted:function(){this.food_styleObject["min-height"]=document.documentElement.clientHeight+"px"},computed:Object(r["a"])(Object(r["a"])({menuTitle:function(){if(this.Food)return this.Food[this.activeKey]}},Object(_["d"])(["foodList","tabIndex","takeway","initAddress","city","shopName","takeway","takeway_shop"])),{},{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var e=this.listHeight[t],i=this.listHeight[t+1];if(this.scrollY>=e&&this.scrollY<i){if(this.activeKey!==t){this.activeKey=t;var s=document.querySelectorAll(".menu-item")[t],a=s.clientHeight,o=Math.round(s.getBoundingClientRect().bottom),n=Math.round(s.getBoundingClientRect().top),r=document.documentElement.clientHeight;this.takeway||(n-=this.$refs.t_header.clientHeight),this.ScrollClient<=s.offsetTop?r-o<5*a&&this.menuScroll.scrollBy(0,-a,800):n<4*a&&(n>0&&t>3?this.menuScroll.scrollBy(0,a,500):this.menuScroll.scrollTo(0,0,500)),this.ScrollClient=s.offsetTop}return t}}},evalDate:function(){return function(t){return t.slice(0,t.indexOf(" "))}}}),watch:{Food:{handler:function(t){var e=[];return t.forEach((function(t){t.listArray&&t.listArray.forEach((function(t){t.foodNumber>=1&&e.push(t)}))})),this.$store.commit("setFoodList",e)},deep:!0}},destroyed:function(){this.scroll&&(this.scroll.destroy(),this.menuScroll.destroy())},beforeRouteEnter:function(t,e,i){i((function(t){t.query()}))},beforeRouteLeave:function(t,e,i){"/home"===t.path&&this.$store.commit("setFood",null),i()}},j=I,P=(i("5e76"),Object(g["a"])(j,s,a,!1,null,"63f7bed9",null));e["default"]=P.exports},"28a2":function(t,e,i){"use strict";var s=i("c31d"),a=i("2b0e"),o=i("d282"),n=Object(o["a"])("image-preview"),r=n[0],c=n[1],l=i("6605"),d=i("3875"),h=i("5fbe"),u=i("ad06"),f=i("5596"),v=i("482d"),m=i("1325"),p=i("2638"),g=i.n(p),b=i("a142"),y=i("ea8e"),_=Object(o["a"])("image"),w=_[0],C=_[1],x=w({props:{src:String,fit:String,alt:String,round:Boolean,width:[Number,String],height:[Number,String],radius:[Number,String],lazyLoad:Boolean,iconPrefix:String,showError:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!0},errorIcon:{type:String,default:"photo-fail"},loadingIcon:{type:String,default:"photo"}},data:function(){return{loading:!0,error:!1}},watch:{src:function(){this.loading=!0,this.error=!1}},computed:{style:function(){var t={};return Object(b["c"])(this.width)&&(t.width=Object(y["a"])(this.width)),Object(b["c"])(this.height)&&(t.height=Object(y["a"])(this.height)),Object(b["c"])(this.radius)&&(t.overflow="hidden",t.borderRadius=Object(y["a"])(this.radius)),t}},created:function(){var t=this.$Lazyload;t&&b["b"]&&(t.$on("loaded",this.onLazyLoaded),t.$on("error",this.onLazyLoadError))},beforeDestroy:function(){var t=this.$Lazyload;t&&(t.$off("loaded",this.onLazyLoaded),t.$off("error",this.onLazyLoadError))},methods:{onLoad:function(t){this.loading=!1,this.$emit("load",t)},onLazyLoaded:function(t){var e=t.el;e===this.$refs.image&&this.loading&&this.onLoad()},onLazyLoadError:function(t){var e=t.el;e!==this.$refs.image||this.error||this.onError()},onError:function(t){this.error=!0,this.loading=!1,this.$emit("error",t)},onClick:function(t){this.$emit("click",t)},genPlaceholder:function(){var t=this.$createElement;return this.loading&&this.showLoading?t("div",{class:C("loading")},[this.slots("loading")||t(u["a"],{attrs:{name:this.loadingIcon,classPrefix:this.iconPrefix},class:C("loading-icon")})]):this.error&&this.showError?t("div",{class:C("error")},[this.slots("error")||t(u["a"],{attrs:{name:this.errorIcon,classPrefix:this.iconPrefix},class:C("error-icon")})]):void 0},genImage:function(){var t=this.$createElement,e={class:C("img"),attrs:{alt:this.alt},style:{objectFit:this.fit}};if(!this.error)return this.lazyLoad?t("img",g()([{ref:"image",directives:[{name:"lazy",value:this.src}]},e])):t("img",g()([{attrs:{src:this.src},on:{load:this.onLoad,error:this.onError}},e]))}},render:function(){var t=arguments[0];return t("div",{class:C({round:this.round}),style:this.style,on:{click:this.onClick}},[this.genImage(),this.genPlaceholder(),this.slots()])}}),k=i("543e"),S=i("2bb1");function $(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}var O,L={mixins:[d["a"]],props:{src:String,show:Boolean,active:Number,minZoom:[Number,String],maxZoom:[Number,String],rootWidth:Number,rootHeight:Number},data:function(){return{scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}},computed:{vertical:function(){var t=this.rootWidth,e=this.rootHeight,i=e/t;return this.imageRatio>i},imageStyle:function(){var t=this.scale,e={transitionDuration:this.zooming||this.moving?"0s":".3s"};if(1!==t){var i=this.moveX/t,s=this.moveY/t;e.transform="scale("+t+", "+t+") translate("+i+"px, "+s+"px)"}return e},maxMoveX:function(){if(this.imageRatio){var t=this.vertical?this.rootHeight/this.imageRatio:this.rootWidth;return Math.max(0,(this.scale*t-this.rootWidth)/2)}return 0},maxMoveY:function(){if(this.imageRatio){var t=this.vertical?this.rootHeight:this.rootWidth*this.imageRatio;return Math.max(0,(this.scale*t-this.rootHeight)/2)}return 0}},watch:{show:function(t){t||this.resetScale()}},mounted:function(){this.bindTouchEvent(this.$el)},methods:{resetScale:function(){this.setScale(1),this.moveX=0,this.moveY=0},setScale:function(t){this.scale=Object(v["a"])(t,+this.minZoom,+this.maxZoom),this.$emit("scale",{scale:this.scale,index:this.active})},toggleScale:function(){var t=this.scale>1?1:2;this.setScale(t),this.moveX=0,this.moveY=0},onTouchStart:function(t){var e=t.touches,i=this.offsetX,s=void 0===i?0:i;this.touchStart(t),this.touchStartTime=new Date,this.startMoveX=this.moveX,this.startMoveY=this.moveY,this.moving=1===e.length&&1!==this.scale,this.zooming=2===e.length&&!s,this.zooming&&(this.startScale=this.scale,this.startDistance=$(t.touches))},onTouchMove:function(t){var e=t.touches;if(this.touchMove(t),(this.moving||this.zooming)&&Object(m["c"])(t,!0),this.moving){var i=this.deltaX+this.startMoveX,s=this.deltaY+this.startMoveY;this.moveX=Object(v["a"])(i,-this.maxMoveX,this.maxMoveX),this.moveY=Object(v["a"])(s,-this.maxMoveY,this.maxMoveY)}if(this.zooming&&2===e.length){var a=$(e),o=this.startScale*a/this.startDistance;this.setScale(o)}},onTouchEnd:function(t){var e=!1;(this.moving||this.zooming)&&(e=!0,this.moving&&this.startMoveX===this.moveX&&this.startMoveY===this.moveY&&(e=!1),t.touches.length||(this.zooming&&(this.moveX=Object(v["a"])(this.moveX,-this.maxMoveX,this.maxMoveX),this.moveY=Object(v["a"])(this.moveY,-this.maxMoveY,this.maxMoveY),this.zooming=!1),this.moving=!1,this.startMoveX=0,this.startMoveY=0,this.startScale=1,this.scale<1&&this.resetScale())),Object(m["c"])(t,e),this.checkTap(),this.resetTouchStatus()},checkTap:function(){var t=this,e=this.offsetX,i=void 0===e?0:e,s=this.offsetY,a=void 0===s?0:s,o=new Date-this.touchStartTime,n=250,r=10;i<r&&a<r&&o<n&&(this.doubleTapTimer?(clearTimeout(this.doubleTapTimer),this.doubleTapTimer=null,this.toggleScale()):this.doubleTapTimer=setTimeout((function(){t.$emit("close"),t.doubleTapTimer=null}),n))},onLoad:function(t){var e=t.target,i=e.naturalWidth,s=e.naturalHeight;this.imageRatio=s/i}},render:function(){var t=arguments[0],e={loading:function(){return t(k["a"],{attrs:{type:"spinner"}})}};return t(S["a"],{class:c("swipe-item")},[t(x,{attrs:{src:this.src,fit:"contain"},class:c("image",{vertical:this.vertical}),style:this.imageStyle,scopedSlots:e,on:{load:this.onLoad}})])}},I=r({mixins:[d["a"],Object(l["a"])({skipToggleEvent:!0}),Object(h["a"])((function(t){t(window,"resize",this.resize,!0),t(window,"orientationchange",this.resize,!0)}))],props:{className:null,closeable:Boolean,asyncClose:Boolean,showIndicators:Boolean,images:{type:Array,default:function(){return[]}},loop:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},minZoom:{type:[Number,String],default:1/3},maxZoom:{type:[Number,String],default:3},showIndex:{type:Boolean,default:!0},swipeDuration:{type:[Number,String],default:500},startPosition:{type:[Number,String],default:0},overlayClass:{type:String,default:c("overlay")},closeIcon:{type:String,default:"clear"},closeOnPopstate:{type:Boolean,default:!0},closeIconPosition:{type:String,default:"top-right"}},data:function(){return{active:0,rootWidth:0,rootHeight:0,doubleClickTimer:null}},mounted:function(){this.resize()},watch:{startPosition:"setActive",value:function(t){var e=this;t?(this.setActive(+this.startPosition),this.$nextTick((function(){e.resize(),e.$refs.swipe.swipeTo(+e.startPosition,{immediate:!0})}))):this.$emit("close",{index:this.active,url:this.images[this.active]})}},methods:{resize:function(){if(this.$el&&this.$el.getBoundingClientRect){var t=this.$el.getBoundingClientRect();this.rootWidth=t.width,this.rootHeight=t.height}},emitClose:function(){this.asyncClose||this.$emit("input",!1)},emitScale:function(t){this.$emit("scale",t)},setActive:function(t){t!==this.active&&(this.active=t,this.$emit("change",t))},genIndex:function(){var t=this.$createElement;if(this.showIndex)return t("div",{class:c("index")},[this.slots("index",{index:this.active})||this.active+1+" / "+this.images.length])},genCover:function(){var t=this.$createElement,e=this.slots("cover");if(e)return t("div",{class:c("cover")},[e])},genImages:function(){var t=this,e=this.$createElement;return e(f["a"],{ref:"swipe",attrs:{lazyRender:!0,loop:this.loop,duration:this.swipeDuration,initialSwipe:this.startPosition,showIndicators:this.showIndicators,indicatorColor:"white"},class:c("swipe"),on:{change:this.setActive}},[this.images.map((function(i){return e(L,{attrs:{src:i,show:t.value,active:t.active,maxZoom:t.maxZoom,minZoom:t.minZoom,rootWidth:t.rootWidth,rootHeight:t.rootHeight},on:{scale:t.emitScale,close:t.emitClose}})}))])},genClose:function(){var t=this.$createElement;if(this.closeable)return t(u["a"],{attrs:{role:"button",name:this.closeIcon},class:c("close-icon",this.closeIconPosition),on:{click:this.emitClose}})},onClosed:function(){this.$emit("closed")},swipeTo:function(t,e){this.$refs.swipe&&this.$refs.swipe.swipeTo(t,e)}},render:function(){var t=arguments[0];if(this.shouldRender)return t("transition",{attrs:{name:"van-fade"},on:{afterLeave:this.onClosed}},[t("div",{directives:[{name:"show",value:this.value}],class:[c(),this.className]},[this.genClose(),this.genImages(),this.genIndex(),this.genCover()])])}}),j={loop:!0,value:!0,images:[],maxZoom:3,minZoom:1/3,onClose:null,onChange:null,className:"",showIndex:!0,closeable:!1,closeIcon:"clear",asyncClose:!1,getContainer:"body",startPosition:0,swipeDuration:500,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"},P=function(){O=new(a["a"].extend(I))({el:document.createElement("div")}),document.body.appendChild(O.$el),O.$on("change",(function(t){O.onChange&&O.onChange(t)})),O.$on("scale",(function(t){O.onScale&&O.onScale(t)}))},A=function(t,e){if(void 0===e&&(e=0),!b["g"]){O||P();var i=Array.isArray(t)?{images:t,startPosition:e}:t;return Object(s["a"])(O,j,i),O.$once("input",(function(t){O.value=t})),O.$once("closed",(function(){O.images=[]})),i.onClose&&(O.$off("close"),O.$once("close",i.onClose)),O}};A.Component=I,A.install=function(){a["a"].use(I)};e["a"]=A},"3bb8":function(t,e,i){},"5c4c":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.bannerList.length>0?i("div",[i("van-swipe",{attrs:{height:125,"indicator-color":"white",autoplay:3e3}},[t._l(t.bannerList,(function(e,s){return[e.advertisementPicPath?i("van-swipe-item",{key:s},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.advertisementPicPath,expression:"item.advertisementPicPath"}],staticStyle:{width:"100%",height:"100%"}})]):t._e()]}))],2)],1):t._e()},a=[],o={props:{bannerList:{type:Array}}},n=o,r=i("2877"),c=Object(r["a"])(n,s,a,!1,null,null,null);e["a"]=c.exports},"5e76":function(t,e,i){"use strict";i("1b0e")},"641a":function(t,e,i){"use strict";i("ab73")},"653e":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"shopCart"}},[i("div",{staticClass:"s-box clearfix"},[i("div",{staticClass:"left fl"},[i("div",{staticClass:"sl-box",on:{click:t.handelClick}},[i("svg",{staticClass:"icon s-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-gouwuche"}})]),i("van-badge",{directives:[{name:"show",rawName:"v-show",value:t.foodLength,expression:"foodLength"}],staticClass:"shop-badge v-badge",attrs:{content:t.foodLength,max:"99"}})],1),t.foodLength?i("span",{staticClass:"price"},[t._v(t._s("￥"+t.totalPrice))]):i("span",{staticClass:"msg"},[t._v(" 购物车空空如也呢！ ")])]),i("div",{staticClass:"s-sub fr",on:{click:t.goPay}},[t._v("去结算")])]),i("van-popup",{attrs:{position:"bottom",id:"shop-popup"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("div",{staticClass:"s-header"},[i("h1",{staticClass:"sh-msg"},[t._v("已选商品")]),i("div",{on:{click:t.clearShopCart}},[i("svg",{staticClass:"icon clear-icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-gouwuche"}})]),i("span",[t._v("清空购物车")])])]),i("div",{ref:"cart",staticClass:"cart"},[i("div",{staticClass:"content111"},[i("food-item",{attrs:{food:t.foodList,setStyle:"s-food-item"}})],1)])])],1)},a=[],o=(i("ac1f"),i("5319"),i("5530")),n=i("2f62"),r=i("92fe"),c={components:{"food-item":r["a"]},data:function(){return{show:!1}},methods:{goPay:function(){return this.takeway&&!this.token?(this.$toast("请登录"),this.$router.replace("/login")):this.foodLength?this.$router.push("/pay"):void 0},handelClick:function(){if(!this.foodLength)return this.$toast("购物车中还没有商品哦");this.show=!0},clearShopCart:function(){this.$store.commit("clearShopCart"),this.show=!1}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(n["d"])(["foodList","totalPrice","token","takeway"])),Object(n["b"])(["foodLength"])),{},{listData:function(){return this.$store.state.foodList}}),watch:{listData:function(t){if(0===t.length)return this.show=!1}}},l=c,d=(i("b122"),i("2877")),h=Object(d["a"])(l,s,a,!1,null,"1057c82b",null);e["a"]=h.exports},"6d9e":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-number-keyboard",{attrs:{id:"num-keyword",show:t.key_flag,title:"标题","extra-key":"清空","close-button-text":"完成","z-index":"100000"},on:{blur:t.onHide,input:t.onInput,delete:t.onDelete}})},a=[],o=(i("fb6a"),i("a9e3"),i("d3b7"),i("25f0"),{props:{key_flag:{type:Boolean},item:{type:Object}},data:function(){return{vt_ipt:""}},mounted:function(){var t=this;this.$nextTick((function(){var e='<h2 class="vt-msg" style="text-align: center;width: 12%;font-size:16px;font-weight:700;">数量</h2>\n      <div class="vt-ipt" style="box-sizing:border-box; height:1.7rem; line-height:1.7rem; border-radius:3px;margin-left:8px;margin-right:6px;padding:0 10px;width:67%;background-color:#fff;"></div>\n      <div class="vt-sub" style="cursor: pointer;padding:7px 12px;;font-size: 0.8rem;background-color: #fff;border-radius: 0.2rem;">确认</div>',i=document.querySelector(".van-number-keyboard__header");i.innerHTML=e,document.querySelector(".vt-sub").addEventListener("click",(function(e){t.vt_ipt?t.item.foodNumber=Number(t.vt_ipt):t.item.foodNumber=0,t.onHide()}))}))},methods:{onInput:function(t){var e=this.vt_ipt;if(e+=t,!(Number(e)>999)){this.vt_ipt=e;var i=document.querySelector(".vt-ipt");return i.innerHTML=this.vt_ipt,"清空"==t?(this.vt_ipt="",void this.setValue()):void 0}this.$toast("最高填写数量为999")},setValue:function(){var t=document.querySelector(".vt-ipt");t.innerHTML=this.vt_ipt},onDelete:function(t){var e=this.vt_ipt.toString();this.vt_ipt=e.slice(0,e.length-1),this.setValue()},onHide:function(){this.vt_ipt="",this.setValue(),this.$emit("onHide",!1)}}}),n=o,r=i("2877"),c=Object(r["a"])(n,s,a,!1,null,null,null);e["a"]=c.exports},a55e:function(t,e,i){"use strict";i("dcd7")},ab73:function(t,e,i){},b122:function(t,e,i){"use strict";i("3bb8")},d81d:function(t,e,i){"use strict";var s=i("23e7"),a=i("b727").map,o=i("1dde"),n=i("ae40"),r=o("map"),c=n("map");s({target:"Array",proto:!0,forced:!r||!c},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},dcd7:function(t,e,i){}}]);