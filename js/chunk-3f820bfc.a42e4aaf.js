(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f820bfc"],{1068:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-page"},[a("navBar",{attrs:{title:"搜索菜品",link:"/index"}}),a("div",{staticClass:"query"},[a("div",{staticClass:"box"},[a("svg",{staticClass:"icon search-icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-sousuo"}})]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{autofocus:"",autocomplete:"off",autocorrect:"off",type:"text",placeholder:"想吃什么搜一搜"},domProps:{value:t.value},on:{input:[function(e){e.target.composing||(t.value=e.target.value)},t.handelInput]}}),a("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],staticClass:"clear-icon",attrs:{name:"cross"},on:{click:function(e){t.value=""}}})],1)]),a("div",{staticClass:"content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.value&&t.stroage,expression:"!value && stroage"}],staticClass:"stroage"},[a("div",{staticClass:"stroage-header"},[a("span",[t._v("历史搜索")]),a("van-icon",{staticClass:"clear-stroage",attrs:{name:"delete-o"},on:{click:t.clearStorage}})],1),a("div",{staticClass:"stroage-content"},t._l(t.stroage,(function(e,o){return a("a",{key:o,attrs:{href:"javascript:;"},on:{click:function(a){t.value=e}}},[t._v(t._s(e))])})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],ref:"queryScroll",staticClass:"box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.data.length,expression:"data.length"}],staticClass:"food-content"},[a("food-item",{attrs:{food:t.data},on:{handelFocus:t.showKey}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.data.length,expression:"!data.length"}],staticClass:"msg"},[a("p",[t._v("该商店内没有相关的商品哦~")]),a("span",[t._v("更多商品开发中，敬请期待")])]),a("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],attrs:{loadingType:2}})],1)]),a("key-board",{attrs:{key_flag:t.show,item:t.item},on:{onHide:t.closeKey}}),a("shopCart",{directives:[{name:"show",rawName:"v-show",value:t.data.length&&t.fot_falg,expression:"data.length && fot_falg"}]})],1)},n=[],i=(a("4de4"),a("4160"),a("c975"),a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("159b"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),s=a("5530"),r=a("d968"),c=a("6d9e"),l=a("bf93"),u=a("92fe"),f=a("653e"),d=a("2f62"),h={components:{navBar:r["a"],loading:l["a"],foodItem:u["a"],shopCart:f["a"],keyBoard:c["a"]},data:function(){return{value:"",data:[],isLoading:!1,show:!1,fot_falg:!0,item:{},stroage:null,timer:null,f_height:document.documentElement.clientHeight,t_height:document.documentElement.clientHeight}},methods:Object(s["a"])(Object(s["a"])({},Object(d["c"])(["setFood"])),{},{getCart:function(){var t=JSON.parse(localStorage.cart),e=[];t.filter((function(t){return e.push(t.foodId)})),this.$store.state.foodList=t,this.food.forEach((function(a){-1!=e.indexOf(a.foodId)?a.foodNumber=t[e.indexOf(a.foodId)].foodNumber:a.foodNumber=0})),console.log(this.food)},query:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new URLSearchParams,a.append("shopId","00b6e25446304622afc76b9cb1493063"),a.append("userToken",""),e.next=5,t.$http.post("/user/postSelectFoodAndTypeByUserInShop",a);case 5:o=e.sent,n=o.data,t.setFood(n),t.getCart();case 9:case"end":return e.stop()}}),e)})))()},showKey:function(t){this.item=t,this.show=!0},closeKey:function(t){this.show=t},handelInput:function(){this.value=this.value.replace(/\s/g,"")},getSearchFood:function(){var t=this;this.data=[],this.isLoading&&(this.isLoading=!1),this.isLoading=!0,this.food&&(this.food.filter((function(e){-1!=e.foodName.indexOf(t.value)&&t.data.push(e)})),this.$nextTick((function(){t.scroll?(console.log("更新滚动条"),t.scroll.refresh()):(console.log("初始化滚动条"),t.scroll=new t.$BScroll(t.$refs.queryScroll,{click:!0,bounce:!1}))})),setTimeout((function(){t.isLoading=!1}),250))},clearStorage:function(){var t=this;this.$confirm({title:"提示",message:"确定清空搜索记录吗?"}).then((function(){localStorage.removeItem("shop_storage"),t.stroage=null})).catch((function(){}))}}),created:function(){var t=this;window.onresize=function(){return function(){t.f_height=document.body.clientHeight}()},this.food?(this.getCart(),console.log(1)):this.query(),JSON.parse(localStorage.getItem("shop_storage"))&&(this.stroage=JSON.parse(localStorage.getItem("shop_storage")))},computed:Object(s["a"])({},Object(d["d"])(["food"])),watch:{value:function(t){var e=this;if(!t)return this.data=[];this.getSearchFood(),this.timer||(this.timer=setTimeout((function(){var a=JSON.parse(localStorage.getItem("shop_storage"));a?-1===a.indexOf(t)&&(e.value&&a.unshift(e.value),localStorage.shop_storage=JSON.stringify(a)):e.value&&(localStorage.shop_storage=JSON.stringify([e.value])),e.stroage=JSON.parse(localStorage.shop_storage),e.timer=null}),1e3))},food:{handler:function(t){var e=[];return t.forEach((function(t){t.foodNumber>=1&&e.push(t)})),this.$store.commit("setFoodList",e)},deep:!0},f_height:function(){this.t_height>this.f_height?this.fot_falg=!1:this.fot_falg=!0}}},v=h,g=(a("8af9"),a("2877")),p=Object(g["a"])(v,o,n,!1,null,"230cf52a",null);e["default"]=p.exports},1603:function(t,e,a){},"3efc":function(t,e,a){},5319:function(t,e,a){"use strict";var o=a("d784"),n=a("825a"),i=a("7b0b"),s=a("50c4"),r=a("a691"),c=a("1d80"),l=a("8aa5"),u=a("14c3"),f=Math.max,d=Math.min,h=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};o("replace",2,(function(t,e,a,o){var m=o.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=o.REPLACE_KEEPS_$0,w=m?"$":"$0";return[function(a,o){var n=c(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n,o):e.call(String(n),a,o)},function(t,o){if(!m&&b||"string"===typeof o&&-1===o.indexOf(w)){var i=a(e,t,this,o);if(i.done)return i.value}var c=n(t),h=String(this),v="function"===typeof o;v||(o=String(o));var g=c.global;if(g){var y=c.unicode;c.lastIndex=0}var x=[];while(1){var O=u(c,h);if(null===O)break;if(x.push(O),!g)break;var C=String(O[0]);""===C&&(c.lastIndex=l(h,s(c.lastIndex),y))}for(var S="",k=0,j=0;j<x.length;j++){O=x[j];for(var $=String(O[0]),L=f(d(r(O.index),h.length),0),N=[],E=1;E<O.length;E++)N.push(p(O[E]));var P=O.groups;if(v){var I=[$].concat(N,L,h);void 0!==P&&I.push(P);var T=String(o.apply(void 0,I))}else T=_($,h,L,N,P,o);L>=k&&(S+=h.slice(k,L)+T,k=L+$.length)}return S+h.slice(k)}];function _(t,a,o,n,s,r){var c=o+t.length,l=n.length,u=g;return void 0!==s&&(s=i(s),u=v),e.call(r,u,(function(e,i){var r;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,o);case"'":return a.slice(c);case"<":r=s[i.slice(1,-1)];break;default:var u=+i;if(0===u)return e;if(u>l){var f=h(u/10);return 0===f?e:f<=l?void 0===n[f-1]?i.charAt(1):n[f-1]+i.charAt(1):e}r=n[u-1]}return void 0===r?"":r}))}}))},"54f4":function(t,e,a){"use strict";a("1603")},5530:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}},"653e":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"shopCart"}},[a("div",{staticClass:"s-box clearfix"},[a("div",{staticClass:"left fl"},[a("div",{staticClass:"sl-box",on:{click:t.handelClick}},[a("svg",{staticClass:"icon s-icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-gouwuche"}})]),a("van-badge",{directives:[{name:"show",rawName:"v-show",value:t.foodLength,expression:"foodLength"}],staticClass:"shop-badge v-badge",attrs:{content:t.foodLength,max:"99"}})],1),t.foodLength?a("span",{staticClass:"price"},[t._v(t._s("￥"+t.totalPrice))]):a("span",{staticClass:"msg"},[t._v(" 购物车空空如也呢！ ")])]),a("div",{staticClass:"s-sub fr",on:{click:t.goPay}},[t._v("去结算")])]),a("van-popup",{attrs:{position:"bottom",id:"shop-popup"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"s-header"},[a("h1",{staticClass:"sh-msg"},[t._v("已选商品")]),a("div",{on:{click:t.clearShopCart}},[a("svg",{staticClass:"icon clear-icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-gouwuche"}})]),a("span",[t._v("清空购物车")])])]),a("div",{ref:"cart",staticClass:"cart"},[a("div",{staticClass:"content111"},[a("food-item",{attrs:{food:t.foodList,setStyle:"s-food-item"}})],1)])])],1)},n=[],i=a("5530"),s=a("2f62"),r=a("92fe"),c={components:{"food-item":r["a"]},data:function(){return{show:!1}},methods:{goPay:function(){if(this.foodLength)return this.$router.push("/pay")},handelClick:function(){if(!this.foodLength)return this.$toast("购物车中还没有商品哦");this.show=!0},clearShopCart:function(){this.$store.commit("clearShopCart"),this.show=!1}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["d"])(["foodList","totalPrice"])),Object(s["b"])(["foodLength"])),{},{listData:function(){return this.$store.state.foodList}}),mounted:function(){},watch:{listData:function(t){if(0===t.length)return this.show=!1}}},l=c,u=(a("6ea2"),a("2877")),f=Object(u["a"])(l,o,n,!1,null,"25804a1b",null);e["a"]=f.exports},"6d9e":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-number-keyboard",{attrs:{id:"num-keyword",show:t.key_flag,title:"标题","extra-key":"清空","close-button-text":"完成","z-index":"100000"},on:{blur:t.onHide,input:t.onInput,delete:t.onDelete}})},n=[],i=(a("fb6a"),a("a9e3"),a("d3b7"),a("25f0"),{props:{key_flag:{type:Boolean},item:{type:Object}},data:function(){return{vt_ipt:""}},mounted:function(){var t=this;this.$nextTick((function(){var e='<h2 class="vt-msg" style="text-align: center;width: 12%;font-size:16px;font-weight:700;">数量</h2>\n      <div class="vt-ipt" style="box-sizing:border-box; height:1.7rem; line-height:1.7rem; border-radius:3px;margin-left:8px;margin-right:6px;padding:0 10px;width:67%;background-color:#fff;"></div>\n      <div class="vt-sub" style="cursor: pointer;padding:7px 12px;;font-size: 0.8rem;background-color: #fff;border-radius: 0.2rem;">确认</div>',a=document.querySelector(".van-number-keyboard__header");a.innerHTML=e,document.querySelector(".vt-sub").addEventListener("click",(function(e){t.vt_ipt?t.item.foodNumber=Number(t.vt_ipt):t.item.foodNumber=0,t.onHide()}))}))},methods:{onInput:function(t){var e=this.vt_ipt;if(e+=t,!(Number(e)>999)){this.vt_ipt=e;var a=document.querySelector(".vt-ipt");return a.innerHTML=this.vt_ipt,"清空"==t?(this.vt_ipt="",void this.setValue()):void 0}this.$toast("最高填写数量为999")},setValue:function(){var t=document.querySelector(".vt-ipt");t.innerHTML=this.vt_ipt},onDelete:function(t){var e=this.vt_ipt.toString();this.vt_ipt=e.slice(0,e.length-1),this.setValue()},onHide:function(){this.vt_ipt="",this.setValue(),this.$emit("onHide",!1)}}}),s=i,r=a("2877"),c=Object(r["a"])(s,o,n,!1,null,null,null);e["a"]=c.exports},"6ea2":function(t,e,a){"use strict";a("fb3e")},7964:function(t,e,a){"use strict";a("ad83")},"857a":function(t,e,a){var o=a("1d80"),n=/"/g;t.exports=function(t,e,a,i){var s=String(o(t)),r="<"+e;return""!==a&&(r+=" "+a+'="'+String(i).replace(n,"&quot;")+'"'),r+">"+s+"</"+e+">"}},"8af9":function(t,e,a){"use strict";a("3efc")},9911:function(t,e,a){"use strict";var o=a("23e7"),n=a("857a"),i=a("af03");o({target:"String",proto:!0,forced:i("link")},{link:function(t){return n(this,"a","href",t)}})},ad83:function(t,e,a){},af03:function(t,e,a){var o=a("d039");t.exports=function(t){return o((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b64b:function(t,e,a){var o=a("23e7"),n=a("7b0b"),i=a("df75"),s=a("d039"),r=s((function(){i(1)}));o({target:"Object",stat:!0,forced:r},{keys:function(t){return i(n(t))}})},bf93:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:"loading"+t.loadingType},[1===t.loadingType?a("div",{staticClass:"spinner"},[a("div",{staticClass:"rect1"}),a("div",{staticClass:"rect2"}),a("div",{staticClass:"rect3"}),a("div",{staticClass:"rect4"}),a("div",{staticClass:"rect5"})]):2===t.loadingType?a("van-loading",{attrs:{color:"#fff",size:"40"}}):t._e()],1)},n=[],i=(a("a9e3"),{props:{loadingType:{type:Number}},name:"Loading"}),s=i,r=(a("54f4"),a("2877")),c=Object(r["a"])(s,o,n,!1,null,"48f08cce",null);e["a"]=c.exports},d968:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav"},[a("van-icon",{staticClass:"nav-arrow-left",attrs:{name:"arrow-left"},on:{click:t.navigator}}),a("div",{staticClass:"nav-title"},[t._v(t._s(t.title))])],1)},n=[],i=(a("9911"),{props:["title","link"],methods:{navigator:function(){"/"===this.link&&this.$store.commit("checkTab",2),this.$router.go(-1)}}}),s=i,r=(a("7964"),a("2877")),c=Object(r["a"])(s,o,n,!1,null,"13462769",null);e["a"]=c.exports},dbb4:function(t,e,a){var o=a("23e7"),n=a("83ab"),i=a("56ef"),s=a("fc6a"),r=a("06cf"),c=a("8418");o({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,a,o=s(t),n=r.f,l=i(o),u={},f=0;while(l.length>f)a=n(o,e=l[f++]),void 0!==a&&c(u,e,a);return u}})},e439:function(t,e,a){var o=a("23e7"),n=a("d039"),i=a("fc6a"),s=a("06cf").f,r=a("83ab"),c=n((function(){s(1)})),l=!r||c;o({target:"Object",stat:!0,forced:l,sham:!r},{getOwnPropertyDescriptor:function(t,e){return s(i(t),e)}})},fb3e:function(t,e,a){}}]);