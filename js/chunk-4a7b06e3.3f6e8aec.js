(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a7b06e3"],{"50f3":function(t,e,a){"use strict";a("f3fe")},5319:function(t,e,a){"use strict";var r=a("d784"),n=a("825a"),s=a("7b0b"),i=a("50c4"),o=a("a691"),c=a("1d80"),l=a("8aa5"),d=a("14c3"),f=Math.max,u=Math.min,p=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,b=function(t){return void 0===t?t:String(t)};r("replace",2,(function(t,e,a,r){var g=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,C=g?"$":"$0";return[function(a,r){var n=c(this),s=void 0==a?void 0:a[t];return void 0!==s?s.call(a,n,r):e.call(String(n),a,r)},function(t,r){if(!g&&m||"string"===typeof r&&-1===r.indexOf(C)){var s=a(e,t,this,r);if(s.done)return s.value}var c=n(t),p=String(this),v="function"===typeof r;v||(r=String(r));var h=c.global;if(h){var y=c.unicode;c.lastIndex=0}var _=[];while(1){var O=d(c,p);if(null===O)break;if(_.push(O),!h)break;var k=String(O[0]);""===k&&(c.lastIndex=l(p,i(c.lastIndex),y))}for(var x="",S=0,P=0;P<_.length;P++){O=_[P];for(var $=String(O[0]),E=f(u(o(O.index),p.length),0),j=[],L=1;L<O.length;L++)j.push(b(O[L]));var M=O.groups;if(v){var N=[$].concat(j,E,p);void 0!==M&&N.push(M);var A=String(r.apply(void 0,N))}else A=w($,p,E,j,M,r);E>=S&&(x+=p.slice(S,E)+A,S=E+$.length)}return x+p.slice(S)}];function w(t,a,r,n,i,o){var c=r+t.length,l=n.length,d=h;return void 0!==i&&(i=s(i),d=v),e.call(o,d,(function(e,s){var o;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,r);case"'":return a.slice(c);case"<":o=i[s.slice(1,-1)];break;default:var d=+s;if(0===d)return e;if(d>l){var f=p(d/10);return 0===f?e:f<=l?void 0===n[f-1]?s.charAt(1):n[f-1]+s.charAt(1):e}o=n[d-1]}return void 0===o?"":o}))}}))},5530:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}},"76e0":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pay-order"},[a("nav-bar",{attrs:{title:"提交订单",link:"/index"}}),a("div",{staticClass:"p-header-bg"}),a("div",{staticClass:"pay-content"},[a("div",{staticClass:"od-content"},[a("div",{staticClass:"order-food"},[t._m(0),a("div",{staticClass:"content-box"},[a("div",{class:{"content-down":!t.flag,"content-up":t.flag}},[a("foodItem",{attrs:{food:t.$store.state.foodList,setStyle:"o-food-item"}})],1),t.foodList.length>3?a("div",{staticClass:"toggle",on:{click:function(e){t.flag=!t.flag}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.flag,expression:"!flag"}]},[t._v("展示更多"),a("van-icon",{attrs:{name:"arrow-down"}})],1),a("span",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}]},[t._v("点击收起"),a("van-icon",{attrs:{name:"arrow-up"}})],1)]):t._e()]),a("div",{staticClass:"od-price"},[t._v(" 共 "+t._s(t.foodList.length)+" 件,小计: "),a("span",[t._v(t._s("￥"+t.totalPrice+"元"))])])])]),a("div",{staticClass:"pay-methods"},[t._m(1),a("div",{staticClass:"pay"},[a("van-radio-group",{model:{value:t.openMethod,callback:function(e){t.openMethod=e},expression:"openMethod"}},["WeChat"===t.openMethod?a("div",{staticClass:"pay-item"},[a("div",{staticClass:"p-method"},[a("span",{staticClass:"pay-icon"},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-weixinzhifu"}})])]),a("span",{staticClass:"msg"},[t._v("微信支付")])]),a("div",{staticClass:"check"},[a("van-radio",{staticClass:"pay-check",attrs:{name:"WeChat"}})],1)]):a("div",{staticClass:"pay-item"},[a("div",{staticClass:"p-method"},[a("span",{staticClass:"pay-icon"},[a("svg",{staticClass:"icon Alipay",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-zhifubao"}})])]),a("span",{staticClass:"msg"},[t._v("支付宝支付")])]),a("div",{staticClass:"check"},[a("van-radio",{staticClass:"pay-check",attrs:{name:"AliPay"}})],1)])])],1)]),a("router-link",{staticClass:"pay-notes clearfix",attrs:{to:{name:"note",params:{data:t.noteStr}}}},[a("span",{staticClass:"note-msg fl"},[t._v("订单备注")]),a("div",{staticClass:"note-box fr"},[a("span",{staticClass:"note-router van-ellipsis"},[t._v(t._s(t.noteStr?t.noteStr:"点击填写备注"))]),a("van-icon",{staticClass:"note-icon",attrs:{name:"arrow"}})],1)])],1),a("div",{staticClass:"pay-fot clearfix"},[a("div",{staticClass:"p-left fl"},[a("div",{staticClass:"p-box"},[a("span",{staticClass:"p-msg"},[t._v("共计: ")]),a("span",{staticClass:"p-price"},[t._v(t._s("￥"+t.totalPrice))])])]),a("div",{staticClass:"p-sub fr",on:{click:t.pay}},[t._v("去支付")])])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shop-info"},[a("div",{staticClass:"od-shop"},[t._v("佚鲜餐厅—大厅五号桌")]),a("span",[t._v("已点菜品")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("p",[t._v("支付方式")]),a("p",[t._v("在线支付")])])}],s=(a("99af"),a("4160"),a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("159b"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),i=a("5530"),o=a("d968"),c=a("92fe"),l=a("2f62"),d={components:{NavBar:o["a"],foodItem:c["a"]},data:function(){return{flag:!1,noteStr:"",order_info:{shopId:"00b6e25446304622afc76b9cb1493063",shopName:"佚鲜餐厅(测试)",orderTime:(new Date).getTime(),orderType:"forHere",tableNumber:"测试2号桌",userName:"",userPhone:"",orderPice:"",orderMessage:"",userAddress:"",orderUserId:""}}},computed:Object(i["a"])({},Object(l["d"])(["foodList","openMethod","totalPrice"])),mounted:function(){this.onpopstate(),this.$route.params.data&&(this.noteStr=this.$route.params.data)},methods:{getOrder:function(t,e){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,s,i,o,c,l,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("confirm"!==t){r.next=17;break}for(c in n=[],i=a.order_info,a.foodList.forEach((function(t){var e=t.foodId,a=t.foodNumber;s="".concat(e,":").concat(a),n.push(s)})),i.orderMessage=JSON.stringify(n),i.orderPice=a.totalPrice,o=new URLSearchParams,o.append("payType","wechat"),o.append("orderRemarks",a.noteStr),i)o.append(c,i[c]);return r.next=12,a.$http.post("/user/postAddOrder",o);case 12:l=r.sent,d=l.data,d&&setTimeout((function(){e(),"000000"===d.messageStatus?(a.$toast("成功"),a.$store.commit("clearShopCart"),a.$router.replace("/index")):a.$toast("失败")}),2e3),r.next=18;break;case 17:e();case 18:case"end":return r.stop()}}),r)})))()},pay:function(){if(this.$confirm({title:"提示",message:"确定提交订单吗?",beforeClose:this.getOrder}),"WeChat"===this.openMethod)return this.$toast("微信支付");ap.tradePay({tradeNO:"2021011222001150051432529580"},(function(t){ap.alert(t.resultCode)}))},onpopstate:function(){window.addEventListener("popstate",this.back,!1)},back:function(){this.$router.replace("/")}},destroyed:function(){window.removeEventListener("popstate",this.back,!1)}},f=d,u=(a("50f3"),a("2877")),p=Object(u["a"])(f,r,n,!1,null,"2036e82c",null);e["default"]=p.exports},7964:function(t,e,a){"use strict";a("ad83")},"857a":function(t,e,a){var r=a("1d80"),n=/"/g;t.exports=function(t,e,a,s){var i=String(r(t)),o="<"+e;return""!==a&&(o+=" "+a+'="'+String(s).replace(n,"&quot;")+'"'),o+">"+i+"</"+e+">"}},9911:function(t,e,a){"use strict";var r=a("23e7"),n=a("857a"),s=a("af03");r({target:"String",proto:!0,forced:s("link")},{link:function(t){return n(this,"a","href",t)}})},ad83:function(t,e,a){},af03:function(t,e,a){var r=a("d039");t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b64b:function(t,e,a){var r=a("23e7"),n=a("7b0b"),s=a("df75"),i=a("d039"),o=i((function(){s(1)}));r({target:"Object",stat:!0,forced:o},{keys:function(t){return s(n(t))}})},d968:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav"},[a("van-icon",{staticClass:"nav-arrow-left",attrs:{name:"arrow-left"},on:{click:t.navigator}}),a("div",{staticClass:"nav-title"},[t._v(t._s(t.title))])],1)},n=[],s=(a("9911"),{props:["title","link"],methods:{navigator:function(){"/"===this.link&&this.$store.commit("checkTab",2),this.$router.go(-1)}}}),i=s,o=(a("7964"),a("2877")),c=Object(o["a"])(i,r,n,!1,null,"13462769",null);e["a"]=c.exports},dbb4:function(t,e,a){var r=a("23e7"),n=a("83ab"),s=a("56ef"),i=a("fc6a"),o=a("06cf"),c=a("8418");r({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,a,r=i(t),n=o.f,l=s(r),d={},f=0;while(l.length>f)a=n(r,e=l[f++]),void 0!==a&&c(d,e,a);return d}})},e439:function(t,e,a){var r=a("23e7"),n=a("d039"),s=a("fc6a"),i=a("06cf").f,o=a("83ab"),c=n((function(){i(1)})),l=!o||c;r({target:"Object",stat:!0,forced:l,sham:!o},{getOwnPropertyDescriptor:function(t,e){return i(s(t),e)}})},f3fe:function(t,e,a){}}]);