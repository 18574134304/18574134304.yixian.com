(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8644fa66"],{"502c":function(e,t,a){},5319:function(e,t,a){"use strict";var r=a("d784"),s=a("825a"),n=a("7b0b"),i=a("50c4"),o=a("a691"),c=a("1d80"),u=a("8aa5"),d=a("14c3"),l=Math.max,p=Math.min,v=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,f=/\$([$&'`]|\d\d?)/g,g=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,a,r){var h=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=r.REPLACE_KEEPS_$0,w=h?"$":"$0";return[function(a,r){var s=c(this),n=void 0==a?void 0:a[e];return void 0!==n?n.call(a,s,r):t.call(String(s),a,r)},function(e,r){if(!h&&b||"string"===typeof r&&-1===r.indexOf(w)){var n=a(t,e,this,r);if(n.done)return n.value}var c=s(e),v=String(this),m="function"===typeof r;m||(r=String(r));var f=c.global;if(f){var $=c.unicode;c.lastIndex=0}var k=[];while(1){var _=d(c,v);if(null===_)break;if(k.push(_),!f)break;var S=String(_[0]);""===S&&(c.lastIndex=u(v,i(c.lastIndex),$))}for(var C="",E=0,y=0;y<k.length;y++){_=k[y];for(var R=String(_[0]),P=l(p(o(_.index),v.length),0),I=[],U=1;U<_.length;U++)I.push(g(_[U]));var M=_.groups;if(m){var j=[R].concat(I,P,v);void 0!==M&&j.push(M);var N=String(r.apply(void 0,j))}else N=x(R,v,P,I,M,r);P>=E&&(C+=v.slice(E,P)+N,E=P+R.length)}return C+v.slice(E)}];function x(e,a,r,s,i,o){var c=r+e.length,u=s.length,d=f;return void 0!==i&&(i=n(i),d=m),t.call(o,d,(function(t,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return a.slice(0,r);case"'":return a.slice(c);case"<":o=i[n.slice(1,-1)];break;default:var d=+n;if(0===d)return t;if(d>u){var l=v(d/10);return 0===l?t:l<=u?void 0===s[l-1]?n.charAt(1):s[l-1]+n.charAt(1):t}o=s[d-1]}return void 0===o?"":o}))}}))},"669c":function(e,t,a){"use strict";a("502c")},"77fe":function(e,t,a){e.exports=a.p+"img/yixian.d481b25f.png"},dd7b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=this,a=t.$createElement,r=t._self._c||a;return r("div",{attrs:{id:"login"}},[t._m(0),r("div",{staticClass:"content"},[r("form",[r("div",{staticClass:"item"},[r("p",[t._v("手机号")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{id:"phone",type:"text",placeholder:"请输入手机号",maxlength:"11",oninput:"value=value.replace(/[^\\d]/g,'')"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t.flag?t._e():r("div",{staticClass:"item item-code"},[r("p",[t._v("验证码")]),r("div",{staticClass:"box"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{id:"code",type:"text",placeholder:"6位验证码",maxlength:"6",oninput:"value=value.replace(/[^\\d]/g,'')"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),r("a",{attrs:{href:"javascript:void(0);"},on:{click:t.sendCode}},[t._v(t._s(t.sendMsg))])])]),t.flag?r("div",{staticClass:"item"},[r("p",[t._v("密码")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{id:"password",type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]):t._e(),r("div",{staticClass:"msg"},[r("a",{staticClass:"toggle",attrs:{href:"javascript:void(0);"},on:{click:function(){t.flag=!t.flag,e.code="",e.password=""}}},[t._v(t._s(t.flag?"验证码登录":"密码登录"))]),r("p",{on:{click:function(e){return t.$router.replace("/register")}}},[t._v(" 还没有账号?"),r("a",{attrs:{href:"javascript:void(0);"}},[t._v("立即注册")])])]),r("a",{staticClass:"submit",attrs:{href:"javascript:void(0);"},on:{click:t.submit}},[t._v("登录")]),r("div",{staticClass:"s-msg"},[t._v("未注册手机号验证后将自动创建佚鲜账户")])])])])},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"logo"},[r("img",{attrs:{src:a("77fe")}})])}],n=(a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),i={data:function(){return{flag:!1,phone:"",code:"",sms:"",sendFlag:!0,sendMsg:"获取验证码",time:60,timer:null}},methods:{send:function(){var e=this;this.sendFlag=!1,this.sendMsg=this.time+"秒后重新获取",this.timer=setInterval((function(){e.time?(e.time-=1,e.sendMsg=e.time+"秒后重新获取"):(e.sendFlag=!0,e.sendMsg="获取验证码",e.time=60,clearInterval(e.timer))}),1e3)},sendCode:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(/^1[3456789]\d{9}$/.test(e.phone)){t.next=2;break}return t.abrupt("return",e.$toast("请输入11位合法手机号"));case 2:if(!e.sendFlag){t.next=11;break}return e.send(),a=new URLSearchParams,a.append("phone",e.phone),t.next=8,e.$http.post("/user/postRegisterConsumerBySendSmsByUseOther",a);case 8:r=t.sent,s=r.data,s&&"000000"===s.messageStatus?(e.$toast("验证码发送成功"),e.sms=s.sms):e.$toast("发送频繁");case 11:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(/^1[3456789]\d{9}$/.test(e.phone)){t.next=2;break}return t.abrupt("return",e.$toast("手机号不正确"));case 2:if(a=new URLSearchParams,e.flag){t.next=10;break}if(!e.sms){t.next=7;break}if(e.sms==e.code){t.next=7;break}return t.abrupt("return",e.$toast("验证码错误"));case 7:a.append("sms",e.code),t.next=13;break;case 10:if(e.password&&!(e.password.length<6)){t.next=12;break}return t.abrupt("return",e.$toast("请输入六位密码"));case 12:a.append("password",e.password);case 13:return a.append("phone",e.phone),t.next=16,e.$http.post("/user/postRegisterConsumerByHaveSmsByUseOther",a);case 16:r=t.sent,s=r.data,console.log(s),s&&"000000"===s.messageStatus?(localStorage.setItem("token",s.userToken),n={name:s.consumerName,phone:e.phone,avatar:s.consumerPath,token:s.userToken},localStorage.setItem("token",s.userToken),localStorage.setItem("user",JSON.stringify(n)),e.$store.commit("set_User_info",n),e.$router.replace("/home")):s&&"000123"===s.messageStatus?e.$confirm({message:"手机号未注册,是否前往注册?"}).then((function(){e.$router.replace("/register")})).catch((function(){})):e.$toast(s.error);case 20:case"end":return t.stop()}}),t)})))()}}},o=i,c=(a("669c"),a("2877")),u=Object(c["a"])(o,r,s,!1,null,"0515b392",null);t["default"]=u.exports}}]);