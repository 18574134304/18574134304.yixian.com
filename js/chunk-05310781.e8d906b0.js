(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05310781"],{"00df":function(t,e,r){"use strict";r("9e53")},"1da1":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("d3b7");function s(t,e,r,s,a,n,i){try{var o=t[n](i),d=o.value}catch(c){return void r(c)}o.done?e(d):Promise.resolve(d).then(s,a)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(a,n){var i=t.apply(e,r);function o(t){s(i,a,n,o,d,"next",t)}function d(t){s(i,a,n,o,d,"throw",t)}o(void 0)}))}}},"29d5":function(t,e,r){"use strict";r("96d7")},"2bb8":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"addAddress"}},[r("nav-bar",{attrs:{title:t.title}}),r("h2",{staticClass:"title"},[t._v("联系人")]),r("div",{staticClass:"box"},[r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[t._v("姓名")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.address.name,expression:"address.name"}],attrs:{type:"text",maxlength:"10",placeholder:"请输入姓名",oninput:"value=value.replace(/\\s+/g, '')"},domProps:{value:t.address.name},on:{input:function(e){e.target.composing||t.$set(t.address,"name",e.target.value)}}})]),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[t._v("手机")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.address.tel,expression:"address.tel"}],attrs:{type:"text",placeholder:"请输入手机号",maxlength:"11",oninput:"value=value.replace(/[^\\d]/g,'')"},domProps:{value:t.address.tel},on:{input:function(e){e.target.composing||t.$set(t.address,"tel",e.target.value)}}})])]),r("h2",{staticClass:"title"},[t._v("收货地址")]),r("div",{staticClass:"box"},[r("div",{staticClass:"item check-address",on:{click:t.checkAddress}},[r("div",{staticClass:"c van-ellipsis",staticStyle:{"line-height":"2"}},[r("span",{staticClass:"label"},[t._v("地区")]),r("span",{staticClass:"address"},[r("van-icon",{staticClass:"address-icon",attrs:{name:"location-o"}}),t._v(" "+t._s(t.address.address)+" ")],1)]),r("van-icon",{staticClass:"arrow-right",attrs:{name:"arrow"}})],1),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[t._v("详细")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.address.addressMessage,expression:"address.addressMessage"}],attrs:{type:"text",placeholder:"例：16号楼427室"},domProps:{value:t.address.addressMessage},on:{input:function(e){e.target.composing||t.$set(t.address,"addressMessage",e.target.value)}}})])]),r("div",{staticStyle:{"margin-top":"36px"}},[r("a",{staticClass:"btn submit",attrs:{href:"javascript:void(0);"},on:{click:t.submit}},[t._v("保存")]),t.editFlag?r("a",{staticClass:"btn del",attrs:{href:"javascript:void(0);"},on:{click:t.del}},[t._v("删除")]):t._e(),r("a",{staticClass:"btn cancel",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])])],1)},a=[],n=(r("b0c0"),r("d3b7"),r("ac1f"),r("3ca3"),r("5319"),r("498a"),r("ddb0"),r("2b3d"),r("96cf"),r("1da1")),i=r("d968"),o={components:{navBar:i["a"]},data:function(){return{payFlag:!1,editFlag:!1,title:"添加收货地址",addressId:"",userToken:"",address:{name:"",tel:"",address:"选择地区",addressMessage:"",lng:"",lat:""}}},methods:{checkAddress:function(){var t=JSON.parse(localStorage.getItem("param"));if(!t)return this.$router.replace("/address");t.editAddress||(t.editAddress={}),t.editAddress.name=this.address.name,t.editAddress.tel=this.address.tel,t.editAddress.addressMessage=this.address.addressMessage,this.editFlag?t.editAddress.edit=!0:t.editAddress.edit=!1,localStorage.setItem("param",JSON.stringify(t)),this.$router.push({path:"/checkAddress",query:{type:"address"}})},del:function(){var t=this;this.$confirm({message:"地址删除后无法恢复\n确认删除吗",beforeClose:function(e,r){"confirm"===e?setTimeout(t.del_address(r),1e3):r()}})},del_address:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=new URLSearchParams,s.append("userToken",e.userToken),s.append("id",e.addressId),r.next=5,e.$http.post("/user/postDeleteAddressByUser",s);case 5:a=r.sent,n=a.data,console.log(n),"000000"===n.messageStatus&&setTimeout((function(){t();var r=JSON.parse(localStorage.getItem("param"));r&&r.pay_picker_poi&&delete r.pay_picker_poi,localStorage.setItem("param",JSON.stringify(r)),e.$router.replace("/address")}),500);case 9:case"end":return r.stop()}}),r)})))()},verify_address:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=e,r.next=3,e.$http.post("/user/postAddAddressBeforeCheck",t);case 3:a=r.sent,n=a.data,n&&"000000"===n.messageStatus?"allow"===n.message?e.addAddress(1):e.$confirm({message:"商家无法配送到该地址\n确定继续添加吗",beforeClose:function(t,e){"confirm"===t?setTimeout((function(){s.addAddress(0,e)}),800):e()}}):alert("出错了");case 6:case"end":return r.stop()}}),r)})))()},submit:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.address,r.name.trim()){e.next=3;break}return e.abrupt("return",t.$toast("请输入姓名"));case 3:if(/^1[3456789]\d{9}$/.test(r.tel)){e.next=5;break}return e.abrupt("return",t.$toast("请输入合法的手机号"));case 5:if(t.address){e.next=7;break}return e.abrupt("return",t.$toast("请选择收货地址"));case 7:t.payFlag?(s=new URLSearchParams,s.append("shopId",t.$store.state.shopId),s.append("x",t.address.lng),s.append("y",t.address.lat),t.verify_address(s)):t.addAddress();case 8:case"end":return e.stop()}}),e)})))()},addAddress:function(){var t=arguments,e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,a,n,i,o,d,c,u,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:for(o in s=t.length>0&&void 0!==t[0]?t[0]:0,a=t.length>1?t[1]:void 0,console.log("哈哈哈"),n=e.address,i=new URLSearchParams,i.append("userToken",e.userToken),e.editFlag&&i.append("id",e.addressId),n)i.append(o,n[o]);return d=e.editFlag?"/user/postUpdateAddressByUser":"/user/postAddAddressByUser",r.next=11,e.$http.post(d,i);case 11:c=r.sent,u=c.data,l=JSON.parse(localStorage.getItem("param")),l&&l.editAddress&&delete l.editAddress,localStorage.setItem("param",JSON.stringify(l)),"000000"===u.messageStatus?e.payFlag?(s&&l&&(l.pay_picker_poi||(l.pay_picker_poi={}),l.pay_picker_poi.address=n.address,l.pay_picker_poi.addressMessage=n.addressMessage,l.pay_picker_poi.name=n.name,l.pay_picker_poi.tel=n.tel),localStorage.setItem("param",JSON.stringify(l)),a&&a(),e.$router.go(-1)):e.$router.replace("/address"):alert("失败");case 17:case"end":return r.stop()}}),r)})))()}},created:function(){this.userToken=this.$store.state.token;var t=JSON.parse(localStorage.getItem("param")),e=this.$store.state.picker_poi;"{}"!==JSON.stringify(this.$route.query)&&this.$route.query.addressId||"edit"===this.$route.query.type?(this.editFlag=!0,this.title="修改收货地址",t?t.editAddress?(this.address.name=t.editAddress.name,this.address.tel=t.editAddress.tel,this.address.address=t.editAddress.poi,this.address.addressMessage=t.editAddress.addressMessage,this.address.lng=t.editAddress.lng,this.address.lat=t.editAddress.lat,this.addressId=t.editAddress.id):(this.address.address=e.address,this.address.lng=e.lng,this.address.lat=e.lat):this.$router.go(-1)):("{}"!==JSON.stringify(this.$route.query)&&"pay"===this.$route.query.type&&(this.payFlag=!0),t&&t.editAddress&&!t.editAddress.edit&&t.editAddress.poi?(console.log(t.editAddress),this.address.name=t.editAddress.name,this.address.tel=t.editAddress.tel,this.address.addressMessage=t.editAddress.addressMessage,this.address?(this.address.address=t.editAddress.poi,this.address.lng=t.editAddress.lng,this.address.lat=t.editAddress.lat):(this.address.address=e.address,this.address.lng=e.lng,this.address.lat=e.lat)):(console.log("okkkkjk"),this.address.address=e.address,this.address.lng=e.lng,this.address.lat=e.lat))}},d=o,c=(r("29d5"),r("2877")),u=Object(c["a"])(d,s,a,!1,null,"67b4b104",null);e["default"]=u.exports},"498a":function(t,e,r){"use strict";var s=r("23e7"),a=r("58a8").trim,n=r("c8d2");s({target:"String",proto:!0,forced:n("trim")},{trim:function(){return a(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var s=r("1d80"),a=r("5899"),n="["+a+"]",i=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),d=function(t){return function(e){var r=String(s(e));return 1&t&&(r=r.replace(i,"")),2&t&&(r=r.replace(o,"")),r}};t.exports={start:d(1),end:d(2),trim:d(3)}},"857a":function(t,e,r){var s=r("1d80"),a=/"/g;t.exports=function(t,e,r,n){var i=String(s(t)),o="<"+e;return""!==r&&(o+=" "+r+'="'+String(n).replace(a,"&quot;")+'"'),o+">"+i+"</"+e+">"}},"96cf":function(t,e,r){var s=function(t){"use strict";var e,r=Object.prototype,s=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(N){d=function(t,e,r){return t[e]=r}}function c(t,e,r,s){var a=e&&e.prototype instanceof g?e:g,n=Object.create(a.prototype),i=new C(s||[]);return n._invoke=S(t,r,i),n}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(N){return{type:"throw",arg:N}}}t.wrap=c;var l="suspendedStart",h="suspendedYield",p="executing",f="completed",v={};function g(){}function m(){}function y(){}var w={};w[n]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(E([])));x&&x!==r&&s.call(x,n)&&(w=x);var _=y.prototype=g.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function r(a,n,i,o){var d=u(t[a],t,n);if("throw"!==d.type){var c=d.arg,l=c.value;return l&&"object"===typeof l&&s.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,o)}),(function(t){r("throw",t,i,o)})):e.resolve(l).then((function(t){c.value=t,i(c)}),(function(t){return r("throw",t,i,o)}))}o(d.arg)}var a;function n(t,s){function n(){return new e((function(e,a){r(t,s,e,a)}))}return a=a?a.then(n,n):n()}this._invoke=n}function S(t,e,r){var s=l;return function(a,n){if(s===p)throw new Error("Generator is already running");if(s===f){if("throw"===a)throw n;return j()}r.method=a,r.arg=n;while(1){var i=r.delegate;if(i){var o=$(i,r);if(o){if(o===v)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(s===l)throw s=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s=p;var d=u(t,e,r);if("normal"===d.type){if(s=r.done?f:h,d.arg===v)continue;return{value:d.arg,done:r.done}}"throw"===d.type&&(s=f,r.method="throw",r.arg=d.arg)}}}function $(t,r){var s=t.iterator[r.method];if(s===e){if(r.delegate=null,"throw"===r.method){if(t.iterator["return"]&&(r.method="return",r.arg=e,$(t,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=u(s,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var n=a.arg;return n?n.done?(r[t.resultName]=n.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function E(t){if(t){var r=t[n];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){while(++a<t.length)if(s.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}return{next:j}}function j(){return{value:e,done:!0}}return m.prototype=_.constructor=y,y.constructor=m,m.displayName=d(y,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,d(t,o,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},k(A.prototype),A.prototype[i]=function(){return this},t.AsyncIterator=A,t.async=function(e,r,s,a,n){void 0===n&&(n=Promise);var i=new A(c(e,r,s,a),n);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},k(_),d(_,o,"Generator"),_[n]=function(){return this},_.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var s=e.pop();if(s in t)return r.value=s,r.done=!1,r}return r.done=!0,r}},t.values=E,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&s.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(s,a){return o.type="throw",o.arg=t,r.next=s,a&&(r.method="next",r.arg=e),!!a}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var d=s.call(i,"catchLoc"),c=s.call(i,"finallyLoc");if(d&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(d){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&s.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var n=a;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var i=n?n.completion:{};return i.type=t,i.arg=e,n?(this.method="next",this.next=n.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var s=r.completion;if("throw"===s.type){var a=s.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,s){return this.delegate={iterator:E(t),resultName:r,nextLoc:s},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=s}catch(a){Function("r","regeneratorRuntime = r")(s)}},"96d7":function(t,e,r){},9911:function(t,e,r){"use strict";var s=r("23e7"),a=r("857a"),n=r("af03");s({target:"String",proto:!0,forced:n("link")},{link:function(t){return a(this,"a","href",t)}})},"9e53":function(t,e,r){},af03:function(t,e,r){var s=r("d039");t.exports=function(t){return s((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},c8d2:function(t,e,r){var s=r("d039"),a=r("5899"),n="​᠎";t.exports=function(t){return s((function(){return!!a[t]()||n[t]()!=n||a[t].name!==t}))}},d968:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"nav"},[r("div",{staticClass:"b"},[r("van-icon",{staticClass:"nav-arrow-left",attrs:{name:"arrow-left"},on:{click:t.navigator}}),r("div",{staticClass:"nav-title"},[t._v(t._s(t.title))])],1)])},a=[],n=(r("ac1f"),r("5319"),r("9911"),{props:["title","link","location_search_id"],methods:{navigator:function(){"/"===this.link?this.$router.go(-1):"/index"===this.link?this.location_search_id?this.$router.replace({path:"/index"+this.location_search_id}):this.$router.replace({path:"/index",query:{shop_id:this.$store.state.shopId}}):"/mine"===this.link?this.$router.replace(this.link):this.$router.go(-1)}}}),i=n,o=(r("00df"),r("2877")),d=Object(o["a"])(i,s,a,!1,null,"93c629b4",null);e["a"]=d.exports}}]);