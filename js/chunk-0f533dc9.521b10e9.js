(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f533dc9"],{4754:function(t,e,s){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var n=s("1d80"),i=s("5899"),a="["+i+"]",r=RegExp("^"+a+a+"*"),o=RegExp(a+a+"*$"),c=function(t){return function(e){var s=String(n(e));return 1&t&&(s=s.replace(r,"")),2&t&&(s=s.replace(o,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},"5c4c":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.bannerList.length>0?s("div",[s("van-swipe",{attrs:{height:125,"indicator-color":"white",autoplay:3e3}},[t._l(t.bannerList,(function(e,n){return[e.advertisementPicPath?s("van-swipe-item",{key:n},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.advertisementPicPath,expression:"item.advertisementPicPath"}],staticStyle:{width:"100%",height:"100%"}})]):t._e()]}))],2)],1):t._e()},i=[],a={props:{bannerList:{type:Array}}},r=a,o=s("2877"),c=Object(o["a"])(r,n,i,!1,null,null,null);e["a"]=c.exports},6470:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tabbar"},t._l(t.tabList,(function(e){return s("a",{key:e.index,staticClass:"tab-item",class:t.tabActive===e.index?"active":"",attrs:{href:"javascript:void(0);"},on:{click:function(s){return t.handelClick(e.link,e.index)}}},[s("van-icon",{staticClass:"icon",attrs:{name:t.tabActive===e.index?e.active_icon:e.icon,size:"24"}}),s("div",{staticClass:"tab-msg"},[t._v(t._s(e.name))])],1)})),0)},i=[],a=(s("a9e3"),{props:{tabActive:{type:Number,default:1}},data:function(){return{tabList:[{name:"首页",icon:"wap-home-o",active_icon:"wap-home",index:1,link:"/home"},{name:"购物车",icon:"shopping-cart-o",active_icon:"shopping-cart",index:2,link:"/cart"},{name:"我的",icon:"manager-o",index:3,active_icon:"manager",link:"/mine"}]}},methods:{handelClick:function(t,e){this.tabActive!==e&&this.$router.push(t)}}}),r=a,o=(s("c8f1"),s("2877")),c=Object(o["a"])(r,n,i,!1,null,"62898362",null);e["a"]=c.exports},6511:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"home"}},[s("div",{staticClass:"h-header"},[s("div",{staticClass:"address",style:{"max-width":t.address_flag?"190px":"0%"}},[s("div",[s("router-link",{attrs:{to:"/checkAddress"}},[s("div",{staticClass:"addressName van-ellipsis"},[t._v(t._s(t.address))])])],1)]),s("router-link",{staticClass:"h-search",attrs:{to:"/search"}},[s("input",{attrs:{type:"text",placeholder:"搜索"}})])],1),s("banner",{attrs:{bannerList:t.bannerList}}),s("div",{ref:"msg",staticClass:"msg"},[t._v("附近商家")]),s("div",{ref:"content",staticClass:"h-content"},[0!==t.shopList.length?[s("div",{ref:"cate",staticClass:"cateSort"},[s("div",{staticClass:"box"},[s("ul",t._l(t.cate,(function(e){return s("li",{key:e.id,class:e.id===t.currentIndex?"current":"",on:{click:function(s){return t.handelClick(e.id)}}},[t._v(" "+t._s(1===e.id?t.name:e.name)+" "),1===e.id?s("i",{staticClass:"arrow-bottom",style:t.styleObject}):t._e()])})),0),s("div",{staticClass:"down"},[t.show?t._l(t.options,(function(e){return s("van-cell",{key:e.index,attrs:{title:e.name},on:{click:function(s){return t.change(e.name)}}})})):t._e()],2)])]),s("div",{staticClass:"shopList"},[s("van-list",{attrs:{offset:50,finished:t.finished,"finished-text":"我也是有底线的~"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("ul",t._l(t.shopList,(function(e){return s("li",{key:e.shopId},[s("a",{attrs:{href:"javascript:void(0);"},on:{click:function(s){return t.goShop(e.shopId)}}},[s("div",{staticClass:"shop-logo"},[s("img",{attrs:{src:e.shopLog}})]),s("div",{staticClass:"shop-info"},[s("div",{staticClass:"s1"},[s("div",{staticClass:"title van-ellipsis"},[t._v(t._s(e.shopName))]),s("div",{staticClass:"status"},[t._v("今日营业")])]),s("div",{staticClass:"s2"},[s("div",{staticClass:"x-box clearfix"},[s("i",{staticClass:"xing"}),s("i",{staticClass:"xing"}),s("i",{staticClass:"xing"}),s("i",{staticClass:"xing2"}),s("i",{staticClass:"xing3"})]),s("span",{staticClass:"score"},[t._v("3.5")]),s("span",{staticClass:"sales"},[t._v("月销2000+")])]),s("div",{staticClass:"s3"},[s("span",{staticClass:"starting"},[t._v("起送￥15")]),s("span",{staticClass:"Delivery s-line"},[t._v("配送费￥3")]),s("span",{staticClass:"Average s-line"},[t._v("人均￥3")])]),s("div",{staticClass:"s4"},[s("span",{staticClass:"tags"},[t._v("红烧肉很好吃")]),s("span",{staticClass:"tags"},[t._v("物美价廉")]),s("span",{staticClass:"tags"},[t._v("支持自取")])]),s("div",{staticClass:"s5"},[s("div",{staticClass:"log"},[t._v("惠")]),s("span",[t._v("特色炒菜8折起")])])])])])})),0)])],1)]:s("h2",{staticStyle:{"font-size":"20px","text-align":"center","margin-top":"80px"}},[t._v(" 当前地区没有门店 ")])],2),s("tab-bar"),s("van-overlay",{attrs:{duration:0,show:t.show},on:{click:function(e){t.show=!1}}})],1)},i=[],a=(s("99af"),s("c975"),s("fb6a"),s("b0c0"),s("d3b7"),s("3ca3"),s("ddb0"),s("2b3d"),s("2909")),r=(s("96cf"),s("1da1")),o=s("5530"),c=s("5c4c"),d=s("6470"),l=s("2f62"),u={components:{Banner:c["a"],tabBar:d["a"]},data:function(){return{address:"定位中...",address_flag:!0,show:!1,name:"综合排序",cate:[{name:"综合排序",id:1},{name:"距离最近",id:2},{name:"销量最高",id:3},{name:"暂时不能使用",id:4}],options:[{name:"综合排序",index:1},{name:"速度最快",index:2},{name:"评分最高",index:3},{name:"起送价最低",index:4},{name:"配送价最低",index:5},{name:"人均高到底",index:6},{name:"人均低到高",index:7}],currentIndex:"",bannerList:[],shopList:[],styleObject:{transform:"rotateZ(135deg);"},total:0,queryInfo:{pageStr:1,phone_x:"",phone_y:""},finished:!1,loading:!1}},methods:Object(o["a"])(Object(o["a"])({onLoad:function(){var t=this;this.shopList.length<this.total?(this.loading=!0,this.queryInfo.pageStr+=1,setTimeout((function(){t.queryShop()}),1e3)):this.finished=!0}},Object(l["c"])(["setpositionFlag","setAddress"])),{},{handelClick:function(t){this.address_flag=!1;var e=Math.round(this.$refs.content.offsetTop),s=document.documentElement.scrollTop||document.body.scrollTop;Math.round(s)<e&&window.scrollTo(0,e-this.$refs.cate.clientHeight),1===t?this.show?this.show=!1:this.show=!0:this.show=!1,this.currentIndex=t},change:function(t){this.show=!1,this.name=t},queryBanner:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("user/SelectAdminAdvertisementByUser");case 2:s=e.sent,n=s.data,"000000"===n.messageStatus&&(t.bannerList=n.listArray);case 5:case"end":return e.stop()}}),e)})))()},queryShop:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=setInterval(Object(r["a"])(regeneratorRuntime.mark((function e(){var n,i,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$store.state.city){e.next=10;break}for(i in clearInterval(s),n=new URLSearchParams,t.queryInfo)n.append(i,t.queryInfo[i]);return n.append("shopAddressCity",t.city),e.next=7,t.$http.post("/user/postSelectInRangeShop",n);case 7:r=e.sent,o=r.data,"000000"===o.messageStatus&&(t.shopList=[].concat(Object(a["a"])(t.shopList),Object(a["a"])(o.listArray)),t.total=o.total,t.loading=!1);case 10:case"end":return e.stop()}}),e)}))),100);case 1:case"end":return e.stop()}}),e)})))()},goShop:function(t){this.$store.commit("setShopId",t),sessionStorage.setItem("shopId",t),this.$router.push({path:"index",query:{shop_id:t}})},getLocation:function(){var t=this,e=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e5});e.getCurrentPosition((function(e,s){if("complete"==e){t.setpositionFlag(!0);var n={lng:s.position.lng,lat:s.position.lat};t.getAddress(n)}else console.log(e,s),t.getCurrentCityPostion()}))},getAddress:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=this,n=t.lng+","+t.lat,i=new AMap.Geocoder({city:s.city,radius:500,extensions:"all"});i.getAddress(n,(function(n,i){if(console.log(i,n),"complete"===n&&i.regeocode){var a=i.regeocode,r={initPosition:{}};if(a.aois.length){var o=a.aois[0];s.address=o.name,r.initPosition.lng=o.location.lng,r.initPosition.lat=o.location.lat,r.addressName=o.name}else{var c=a.addressComponent.township,d=a.formattedAddress,l=d.indexOf(c);l+=c.length;var u=d.slice(l);s.address=u,r.addressName=u,r.initPosition.lng=t.lng,r.initPosition.lat=t.lat}if(s.queryInfo.phone_x=r.initPosition.lng,s.queryInfo.phone_y=r.initPosition.lat,e||s.queryShop(),r.initPosition.province=a.addressComponent.province,r.initPosition.city=a.addressComponent.city,r.initPosition.district=a.addressComponent.district,a.pois.length){var h=a.pois.slice(1,6);r.pois=h}localStorage.setItem("param",JSON.stringify(r)),s.setAddress(r)}}))},getCurrentCityPostion:function(){var t=this,e=setInterval(Object(r["a"])(regeneratorRuntime.mark((function s(){var n,i,a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.$store.state.city){s.next=9;break}return clearInterval(e),n=new URLSearchParams,n.append("shopAddressCity",t.$store.state.city),s.next=6,t.$http.post("/user/postSelectShopCoordinateByCity",n);case 6:i=s.sent,a=i.data,"000000"===a.messageStatus&&(r={lng:a.phone_x,lat:a.phone_y},t.getAddress(r,1));case 9:case"end":return s.stop()}}),s)}))),100)}}),mounted:function(){var t=this;this.queryShop(),this.$nextTick((function(){var e=t.$refs.msg;window.addEventListener("scroll",(function(s){var n=Math.round(e.offsetTop)-50;Math.round(window.pageYOffset)>n?t.address_flag&&(t.address_flag=!1):t.address_flag||(t.address_flag=!0)}))}))},watch:{show:function(){this.show?(this.styleObject.transform="rotateZ(-45deg)",this.styleObject.marginBottom="0px"):(this.styleObject.transform="rotateZ(135deg)",this.styleObject.marginBottom="3px")}},created:function(){this.queryBanner();var t=this.initAddress;t&&"{}"!==JSON.stringify(t)?(t.address?this.address=t.address:t.addressName?this.address=t.addressName:this.address="定位失败,请选择收货地址",(t.pickerPoi||t.initPosition)&&(t.pickerPoi?(this.queryInfo.phone_x=t.pickerPoi.lng,this.queryInfo.phone_y=t.pickerPoi.lat):(this.queryInfo.phone_x=t.initPosition.lng,this.queryInfo.phone_y=t.initPosition.lat))):this.getLocation()},computed:Object(o["a"])({},Object(l["d"])(["city","initAddress"])),destroyed:function(){window.removeEventListener("scroll",(function(){}))}},h=u,p=(s("8d63"),s("2877")),f=Object(p["a"])(h,n,i,!1,null,"75d063bc",null);e["default"]=f.exports},7156:function(t,e,s){var n=s("861d"),i=s("d2bb");t.exports=function(t,e,s){var a,r;return i&&"function"==typeof(a=e.constructor)&&a!==s&&n(r=a.prototype)&&r!==s.prototype&&i(t,r),t}},"8d63":function(t,e,s){"use strict";s("4754")},a9e3:function(t,e,s){"use strict";var n=s("83ab"),i=s("da84"),a=s("94ca"),r=s("6eeb"),o=s("5135"),c=s("c6b6"),d=s("7156"),l=s("c04e"),u=s("d039"),h=s("7c73"),p=s("241c").f,f=s("06cf").f,v=s("9bf2").f,g=s("58a8").trim,m="Number",y=i[m],b=y.prototype,_=c(h(b))==m,x=function(t){var e,s,n,i,a,r,o,c,d=l(t,!1);if("string"==typeof d&&d.length>2)if(d=g(d),e=d.charCodeAt(0),43===e||45===e){if(s=d.charCodeAt(2),88===s||120===s)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+d}for(a=d.slice(2),r=a.length,o=0;o<r;o++)if(c=a.charCodeAt(o),c<48||c>i)return NaN;return parseInt(a,n)}return+d};if(a(m,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var C,w=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof w&&(_?u((function(){b.valueOf.call(s)})):c(s)!=m)?d(new y(x(e)),s,w):x(e)},I=n?p(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),k=0;I.length>k;k++)o(y,C=I[k])&&!o(w,C)&&v(w,C,f(y,C));w.prototype=b,b.constructor=w,r(i,m,w)}},c8f1:function(t,e,s){"use strict";s("defd")},defd:function(t,e,s){}}]);