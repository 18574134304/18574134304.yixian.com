(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-283d913b"],{"356c":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"personal"}},[e("nav-bar",{attrs:{title:"设置"}}),e("div",{staticClass:"cell",on:{click:t.showUpload}},[e("span",{staticClass:"label"},[t._v("头像")]),e("div",{staticClass:"avatar"},[e("img",{attrs:{src:t.avatar}})]),e("van-icon",{staticClass:"arrow-right",attrs:{name:"arrow"}}),e("input",{ref:"a_upload",attrs:{type:"file",id:"avatarUpload",multiple:"multiple",accept:"image/*;",capture:"camera"},on:{change:t.change}})],1),e("van-cell",{attrs:{title:"用户名(可用)","is-link":"",value:t.name,to:"/setpersonal/name"}}),e("van-cell",{attrs:{title:"账号密码(可用)","is-link":"",value:"修改",to:"/setpersonal/password"}}),e("van-cell",{attrs:{title:"手机号(可用)","is-link":"",value:t.phone,to:"/setpersonal/mobile"}})],1)},r=[],s=(e("c975"),e("d3b7"),e("3ca3"),e("ddb0"),e("2b3d"),e("96cf"),e("1da1")),c=e("5530"),i=e("d968"),o=e("4303"),l=e("2f62"),u={components:{navBar:i["a"]},data:function(){return{}},computed:Object(c["a"])({},Object(l["d"])(["name","phone","avatar","token"])),created:function(){console.log(this.avatar)},methods:{showUpload:function(){this.$refs.a_upload.click()},change:function(t){var a=this;if(t){var e=t.target.files[0];if(!e)return;if(-1==e.type.indexOf("image/"))return this.$toast("请上传图片");Object(o["a"])(e,"avatar").then(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,r,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new URLSearchParams,n.append("userToken",a.token),n.append("consumerPath",e.url),t.next=5,a.$http.post("user/postChangeConsumerPicPath",n);case 5:r=t.sent,s=r.data,"000000"===s.messageStatus?(a.$toast("上传头像成功"),a.$store.commit("set_Avatar",e.url),c=JSON.parse(localStorage.getItem("user")),c.avatar=e.url,localStorage.setItem("user",JSON.stringify(c))):a.$toast("服务器异常，上传失败");case 8:case"end":return t.stop()}}),t)})));return function(a){return t.apply(this,arguments)}}()).catch((function(t){a.$toast("头像上传失败")}))}}}},p=u,d=(e("661e"),e("cc54"),e("2877")),f=Object(d["a"])(p,n,r,!1,null,"47b6933e",null);a["default"]=f.exports},"661e":function(t,a,e){"use strict";e("69dc")},"69dc":function(t,a,e){},"8cbd":function(t,a,e){},cc54:function(t,a,e){"use strict";e("8cbd")}}]);